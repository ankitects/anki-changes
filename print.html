<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Changes</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="changes/intro.html">Changes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="changes/2.1.60-69.html">Changes in 2.1.60 to 69</a></li><li class="chapter-item expanded "><a href="changes/2.1.50-59.html">Changes in 2.1.50 to 59</a></li><li class="chapter-item expanded "><a href="changes/2.1.40-49.html">Changes in 2.1.40 to 49</a></li><li class="chapter-item expanded "><a href="changes/2.1.30-39.html">Changes in 2.1.30 to 39</a></li><li class="chapter-item expanded "><a href="changes/2.1.20-29.html">Changes in 2.1.20 to 29</a></li><li class="chapter-item expanded "><a href="changes/2.1.10-19.html">Changes in 2.1.10 to 19</a></li><li class="chapter-item expanded "><a href="changes/2.1.0-9.html">Changes in 2.1.0 to 9</a></li><li class="chapter-item expanded "><a href="changes/2.1.html">Changes in Anki 2.1</a></li></ol></li><li class="chapter-item expanded "><a href="known-issues.html">Known Issues</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Changes</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ankitects/anki-changes/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="changes"><a class="header" href="#changes">Changes</a></h1>
<p>âš  After using the latest version, if you wish to open your collection with an
earlier Anki release, please go to the File&gt;Switch Profile menu item, and click
on &quot;Downgrade &amp; Quit&quot;. If you skip this step, you may get an error message when
opening your collection in an older Anki version, and you will need to return to
this version, downgrade, then try again.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-2160-to-69"><a class="header" href="#changes-in-2160-to-69">Changes in 2.1.60 to 69</a></h1>
<ul>
<li><a href="changes/2.1.60-69.html#changes-in-2166">Changes in 2.1.66</a></li>
<li><a href="changes/2.1.60-69.html#changes-in-2165">Changes in 2.1.65</a></li>
<li><a href="changes/2.1.60-69.html#changes-in-2164">Changes in 2.1.64</a></li>
<li><a href="changes/2.1.60-69.html#changes-in-2163">Changes in 2.1.63</a></li>
<li><a href="changes/2.1.60-69.html#changes-in-2162">Changes in 2.1.62</a></li>
<li><a href="changes/2.1.60-69.html#changes-in-2161">Changes in 2.1.61</a></li>
<li><a href="changes/2.1.60-69.html#changes-in-2160">Changes in 2.1.60</a></li>
</ul>
<h2 id="changes-in-2166"><a class="header" href="#changes-in-2166">Changes in 2.1.66</a></h2>
<ul>
<li>Windows and Mac builds have been updated to the latest toolkit version,
which will hopefully fix some crashes/bugs.</li>
<li>The v3 scheduler is now the default for new users.</li>
<li>When imports complete, a summary window is now shown (thanks to Abdo).</li>
<li>Use a different approach for detecting copy+paste from Anki fields, which may fix some crashes.</li>
<li>The minimalist/reduce motion toggles should no longer affect card content.</li>
<li>Media check now automatically extracts images that have been embedded in fields.</li>
<li>Handle importing of legacy AnkiDroid backups.</li>
<li>The built-in sync server can now be built without Python if you prefer.</li>
<li>Add keyboard shortcut for legacy stats (thanks to Luc).</li>
<li>Accessibility improvements (thanks to Derek and Kenny).</li>
<li>Fix addon update dialog showing twice (thanks to Rumo).</li>
<li>Fix bold toggle not working in certain circumstances (thanks to mmjang).</li>
<li>Align code blocks to left (thanks to shunlog).</li>
<li>Make weekday font smaller for Chinese locale (thanks to mmjang).</li>
<li>Improve performance of invalid ID fix in DB check.</li>
<li>Fix main window geometry/state not being restored in some cases (thanks to Abdo).</li>
<li>Handle invalid float mtimes in DB check.</li>
<li>Fix total note count not being logged in apkg import.</li>
<li>Report actual error when DbError occurs.</li>
<li>Fix two issues with MathJax editor (thanks to Hikaru).</li>
<li>Don't fail silently when an empty csv is imported.</li>
<li>Fix two issues that can cause editor fields to behave incorrectly (thanks to Hikaru).</li>
<li>When cards are in intraday learning queue, don't use original due.</li>
<li>Fix &quot;Add-ons possibly involved&quot; message never appearing on Windows (thanks to Abdo).</li>
<li>Add partial support for Hangul keyboard shortcuts during review (thanks to Christopher).</li>
<li>Disable add-on buttons when no field is focused by default (thanks to Abdo).</li>
<li>Fix toggleable editor button styles (thanks to Abdo).</li>
<li>Fixed a sporadic error in the review screen (thanks to mjuhanne).</li>
<li>Fixed an error that could occur when syncing between newer and older clients.</li>
<li>Fixed tab order in find&amp;replace screen (thanks to Gabriel).</li>
<li>Various other minor fixes and behind-the-scenes changes.</li>
</ul>
<p>Dev related:</p>
<ul>
<li>Fix incorrect handling of locals in debug console (thanks to Rumo).</li>
<li>Add did-add-field-hook analogous to did-delete-field (thanks to 3ter).</li>
<li>Fix run-qt5.15.bat (thanks to Hikaru).</li>
<li>Support more mime types for add_extension_based_on_mime (thanks to BenYip).</li>
<li>Make set_config_help_action work with submodules (thanks to Abdo).</li>
<li>Exclude Fabric's large canvas dependency (thanks to Kavel).</li>
</ul>
<h2 id="changes-in-2165"><a class="header" href="#changes-in-2165">Changes in 2.1.65</a></h2>
<ul>
<li>Default to current deck in csv import if settings allow it.</li>
<li>Disable Toggle Bury when nothing is selected (thanks to Abdo).</li>
<li>Fix broken window styling when installation path includes certain Latin1 chars on Windows.</li>
<li>Fix illegible tooltips when system in dark mode on some Linux installs.</li>
<li>Fix incorrect font sizes on X11 when fractional scaling in use.</li>
<li>If the old Anki uninstaller fails, allow installation to proceed.</li>
<li>Improve phrasing in dialog that asks which deck's options should be shown (thanks to chrissy0).</li>
<li>Fix some add-on installation errors not being reported (thanks to Abdo)</li>
<li>Add add-on installation hooks (thanks to Abdo).</li>
</ul>
<h2 id="changes-in-2164"><a class="header" href="#changes-in-2164">Changes in 2.1.64</a></h2>
<p>Functional changes:</p>
<ul>
<li>The Windows installer no longer requires admin access (thanks to Martin). The first time you
update, you'll need to run the installer again after uninstall completes.</li>
<li>Allow the user to configure answer keys in the preferences, fixing conflicts (thanks to Ren).</li>
<li>Preload embedded fonts to prevent flicker, and tweak wait time for image preloading (thanks to Hikaru).</li>
<li>Add the ability to search for FSRS scheduling properties, eg. <code>prop:cdn:d&gt;0.5</code> to search
for the difficulty &gt; 0.5.</li>
<li>Window positions, state and browser headers are now reset each time the Qt version changes,
which should fix a number of crashes that users were reporting.</li>
<li>Add-on shortcuts will now override Anki defaults (thanks to Ren).</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Fix media files being imported incorrectly when importing an .apkg file exported without support for older
Anki versions.</li>
<li>Increase the number of supported fields in the editor (thanks to Hikaru).</li>
<li>Attempt to work around intermittent color setting failures in Qt6.5 on macOS.</li>
<li>Fix ugly text rendering on Wayland when using fractional scaling.</li>
<li>Fix inability to import csv when path contains single quote.</li>
<li>Show an error pop-up when csv import screen fails to load.</li>
<li>Don't disable animations on card templates when reduce motion is on.</li>
<li>Fix an error in the console when resizing windows (thanks to Austin)</li>
<li>Fix a panic when user sets a huge learning step.</li>
<li>Fix page scrolling when input box loses focus (thanks to Hikaru).</li>
<li>Fix failure to start on Windows when path contains non-Latin text.</li>
<li>Fix due/ivl prop queries not working in filtered decks.</li>
<li>Make some collection methods public in the Rust API (thanks to Joel).</li>
</ul>
<h2 id="changes-in-2163"><a class="header" href="#changes-in-2163">Changes in 2.1.63</a></h2>
<ul>
<li>Add alternative review shortcuts (h,j,k,l,u) (thanks to Ren).</li>
<li>Add an option in the preferences to stop spacebar from rating card (thanks to Ren).</li>
<li>Prevent change in image aspect ratio in editor when images have an explicit size set (thanks to Matthias).</li>
<li>Fix custom sync URL not working with subpaths (thanks to XeR).</li>
<li>Fix fcitx5 failing to work in Linux Qt6 build.</li>
<li>Fix some buttons in the deck options screen being illegible when hovering.</li>
</ul>
<h2 id="changes-in-2162"><a class="header" href="#changes-in-2162">Changes in 2.1.62</a></h2>
<ul>
<li>
<p>Update macOS/Linux builds to Qt 6.5, and update Windows build to Qt 6.4.3.</p>
<ul>
<li>
<p>The minimum macOS version for the Qt6 build is now macOS 11.</p>
</li>
<li>
<p>If you are on Linux and don't have ANKI_WAYLAND set, you may need to install
libxcb-cursor or Anki will fail to start. Eg on Debian/Ubuntu:</p>
<p>sudo apt install libxcb-cursor0</p>
</li>
</ul>
</li>
<li>
<p>Add an option to fully randomize reviews in the V3 scheduler.</p>
</li>
<li>
<p>Add a new option to the card templates screen to restore a notetype to the
default fields/templates/styling.</p>
</li>
<li>
<p>Add clearer tooltip to hourly breakdown graph (thanks to Rumo).</p>
</li>
<li>
<p>Fix focus loss when closing HTML editor (thanks to Hikaru).</p>
</li>
<li>
<p>Prevent MathJax editor from closing when you selected text with the mouse and
released the mouse button outside the window (thanks to Hikaru).</p>
</li>
<li>
<p>Pass original deck name to custom scheduling code, instead of filtered deck
name.</p>
</li>
<li>
<p>When importing an .apkg where notetypes have changed, display a clearer
message, and only if the notes in the incoming collection are newer.</p>
</li>
<li>
<p>Fix MathJax editor not being sized correctly (thanks to Hikaru).</p>
</li>
<li>
<p>Fix a flicker when dropdowns shown with reduce motion on (thanks to Hikaru).</p>
</li>
</ul>
<h2 id="changes-in-2161"><a class="header" href="#changes-in-2161">Changes in 2.1.61</a></h2>
<p>Improvements to the V3 scheduler:</p>
<ul>
<li>Added a global option to stop the review limit from limiting new cards (thanks
to Rumo).</li>
<li>You can now enable review burying without new burying again (thanks to Rumo).
There are some caveats - please see the bury tooltips in the deck options.</li>
<li>Ensure good is at least previous+1 even if low hard factor set.</li>
</ul>
<p>Other features/improvements:</p>
<ul>
<li>You can now exclude certain fields from unqualified searches via the Fields
screen (thanks to Abdo).</li>
<li>The tag area in the editor is now shown with a dropdown instead of a splitter
(thanks to Matthias).</li>
<li>You can now adjust the current deck in the stats screen (thanks to yellowjello).</li>
<li>Add a button in the preferences to reset window sizes (thanks to Abdo).</li>
<li>Passing an invalid profile name on the commandline will now show profile
picker instead of an error.</li>
<li>You can shift-click on a deck to select it as the current deck (thanks to
Tobias).</li>
<li>You can now import decks with broken timestamps - they'll automatically be
fixed on import (thanks to Rumo).</li>
<li>A DB check will now fix broken timestamps (thanks to Rumo).</li>
<li>Add time of date to browser date.</li>
<li>Allow Shift+Tab to move focus from tag area to last field (thanks to Hikaru).</li>
<li>Custom schedulers now have the deck name and random seed passed in to them, so
they don't need to extract the info from the DOM (thanks to Rumo).</li>
<li>Improve debug console (thanks to Rumo).</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Fix stats calendar incorrect due to daylight savings time (thanks to Kieran).</li>
<li>Prevent the top bar from hiding in the stats page as you scroll down (thanks
to Fabricio).</li>
<li>Reduce motion is now on by default, as it fixes an issue with the bottom bar
failing to appear for some users.</li>
<li>Fix new limit in v3 decreasing more than it should (thanks to Rumo).</li>
<li>Fix current tag text not being saved when changing note via shortcut key
(thanks to Hikaru).</li>
<li>Fix tags popover becoming separated from the tags field (thanks to Fabricio).</li>
<li>Ensure the bottom buttons aren't displayed until the custom scheduling code
has finished running (thanks to Rumo).</li>
<li>Refresh study screen if the user toggles the v3 scheduler (thanks to Rumo).</li>
<li>Fix notetypes screen not being closable after adding a notetype on Mac.</li>
<li>Check for division by zero when calculating browser aspect ratio, which fixes
an issue with i3 (thanks to Ben).</li>
<li>Fallback to Wayland if X11 is not available (thanks to Ingemar).</li>
<li>Tweaks to the build scripts to make packaging in distros easier (thanks to
Euan).</li>
<li>Fix silent file save failures and bad default save path in Flatpak (thanks to
Jack).</li>
<li>Fix HTML editor sometimes not properly sized when opening editor (thanks to
Hikaru).</li>
<li>Fix error showing if user clicks in sidebar before it's rendered.</li>
<li>Fix backup creation for collections &gt; 1 GiB (thanks to Rumo).</li>
<li>Fix black on grey minimalist buttons in Qt5 (thanks to Daniel).</li>
<li>Fix black on grey deck options on Qt5 (thanks to Daniel).</li>
<li>Export static references from sound tags (thanks to Rumo).</li>
<li>Fix packaged audio tools path on Windows (thanks to Abdo).</li>
<li>Fix a case where 'reduce motion' and 'minimalist mode' were switched (thanks
to Daniel).</li>
<li>Fix panic with invalid sync server URL with port (thanks to Daniel).</li>
<li>Fix double scrollbars in deck options (thanks to Fabricio).</li>
<li>Fix images with non-Latin text and commas failing to display.</li>
<li>Fix editor text possibly being transfer to different notetypes (thanks to
Fabricio).</li>
<li>Improve hover appearance of buttons (thanks to Matthias).</li>
<li>Fix inability to activate search in graphs screen on Android (thanks to
yellowjello).</li>
<li>Fix an issue building on Windows (thanks to Kieran).</li>
</ul>
<h2 id="changes-in-2160"><a class="header" href="#changes-in-2160">Changes in 2.1.60</a></h2>
<p>If updating from 2.1.57 or earlier, please see the important note in the 2.1.58 change notes.</p>
<ul>
<li>Add button to tag notes with missing media (thanks to Rumo).</li>
<li>Fix slow editor startup for users with lots of fields (thanks to Hikaru).</li>
<li>Fix a regression in 2.1.58 that broke TTS add-ons (thanks to Rumo).</li>
<li>Fix HTML editor hiding when shown by default (thanks to Fabricio).</li>
<li>Fix some widgets not indicating they're disabled (thanks to Matthias).</li>
<li>Fix deck options selector not updating the current entry sometimes (thanks to Fabricio).</li>
<li>Fix type box losing focus when switching IMEs (thanks to Hikaru).</li>
<li>Fix 'toggle bury' not updating for automatically-buried cards.</li>
<li>Improvements to lifecycle handling for add-ons accessing Svelte components (thanks to Matthias).</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-2150-to-59"><a class="header" href="#changes-in-2150-to-59">Changes in 2.1.50 to 59</a></h1>
<ul>
<li><a href="changes/2.1.50-59.html#changes-in-2159">Changes in 2.1.59</a></li>
<li><a href="changes/2.1.50-59.html#changes-in-2158">Changes in 2.1.58</a>
<ul>
<li><a href="changes/2.1.50-59.html#custom-sync-server">Custom sync server</a></li>
<li><a href="changes/2.1.50-59.html#type-in-the-answer">Type in the answer</a></li>
<li><a href="changes/2.1.50-59.html#importing">Importing</a></li>
<li><a href="changes/2.1.50-59.html#scheduling">Scheduling</a></li>
<li><a href="changes/2.1.50-59.html#fixes">Fixes</a></li>
</ul>
</li>
<li><a href="changes/2.1.50-59.html#changes-in-2157">Changes in 2.1.57</a></li>
<li><a href="changes/2.1.50-59.html#changes-in-2156">Changes in 2.1.56</a></li>
<li><a href="changes/2.1.50-59.html#changes-in-2155">Changes in 2.1.55</a></li>
<li><a href="changes/2.1.50-59.html#changes-in-2154">Changes in 2.1.54</a></li>
<li><a href="changes/2.1.50-59.html#changes-in-2153">Changes in 2.1.53</a>
<ul>
<li><a href="changes/2.1.50-59.html#editor-improvements">Editor Improvements</a></li>
<li><a href="changes/2.1.50-59.html#other-improvements">Other Improvements</a></li>
</ul>
</li>
<li><a href="changes/2.1.50-59.html#changes-in-2152">Changes in 2.1.52</a>
<ul>
<li><a href="changes/2.1.50-59.html#editor-improvements-1">Editor Improvements</a></li>
<li><a href="changes/2.1.50-59.html#other-improvements-1">Other Improvements</a></li>
<li><a href="changes/2.1.50-59.html#for-developers">For Developers</a></li>
<li><a href="changes/2.1.50-59.html#new-apkg-importexport">New Apkg Import/Export</a></li>
</ul>
</li>
<li><a href="changes/2.1.50-59.html#changes-in-2151">Changes in 2.1.51</a></li>
<li><a href="changes/2.1.50-59.html#changes-in-2150">Changes in 2.1.50</a>
<ul>
<li><a href="changes/2.1.50-59.html#platform-specific-changes">Platform-Specific Changes</a></li>
<li><a href="changes/2.1.50-59.html#qt6">Qt6</a></li>
<li><a href="changes/2.1.50-59.html#scheduler-changes">Scheduler Changes</a></li>
<li><a href="changes/2.1.50-59.html#editor-changes">Editor Changes</a></li>
<li><a href="changes/2.1.50-59.html#new-features">New Features</a></li>
<li><a href="changes/2.1.50-59.html#other-improvements-2">Other Improvements</a></li>
<li><a href="changes/2.1.50-59.html#for-developers-1">For Developers</a></li>
</ul>
</li>
</ul>
<h2 id="changes-in-2159"><a class="header" href="#changes-in-2159">Changes in 2.1.59</a></h2>
<p>Due to a packaging problem, this release was yanked.</p>
<h2 id="changes-in-2158"><a class="header" href="#changes-in-2158">Changes in 2.1.58</a></h2>
<p>This release fixes an issue in 2.1.57 that caused cards and deck presets
to be reset to the default ease, if you exported a .colpkg with compatibility
with older clients enabled, or used the downgrade and quit option, then opened
the collection again. For the former issue, this occurred to the collection you
were exporting from, and not just the .colpkg file. If you were affected by this,
running the following in the debug console after updating should restore your
cards to the ease they were at when you last reviewed them, if they were not
reviewed after the problem occurred. Please make a backup before proceeding.</p>
<pre><code>updated = 0
for cid, old, new in mw.col.db.all(&quot;select id, factor, (select factor from revlog where cid=cards.id order by id desc limit 1) as factor2 from cards where type=2&quot;):
  if new and old != new:
    card = mw.col.get_card(cid)
    card.factor = new
    mw.col.update_card(card)
    updated += 1
print(&quot;updated&quot;, updated)
</code></pre>
<p>It will print the number of updated cards.</p>
<p><a href="https://docs.ankiweb.net/misc.html#debug-console">https://docs.ankiweb.net/misc.html#debug-console</a></p>
<p>Other changes in this update:</p>
<h3 id="custom-sync-server"><a class="header" href="#custom-sync-server">Custom sync server</a></h3>
<ul>
<li>You can now customize the network timeout in the sync settings, which may be required
if you have a large collection and/or a slower device.</li>
<li>Maximum sizes are no longer enforced when downloading from custom sync servers.</li>
</ul>
<h3 id="type-in-the-answer"><a class="header" href="#type-in-the-answer">Type in the answer</a></h3>
<ul>
<li>Fix type answer comparison being collapsed when extra characters in input.</li>
<li>Revert to blanking out missed chars in provided text, like older releases.</li>
<li>Wrap expected text in code block when no answer provided.</li>
</ul>
<h3 id="importing"><a class="header" href="#importing">Importing</a></h3>
<ul>
<li>When importing csv files, you can now limit duplicate matching to the deck cards are in (thanks to Rumo).</li>
<li>Support UTF-8-BOM when importing CSV (thanks to Rumo).</li>
<li>Duplicate handling policy can be specified in the csv file header (thanks to Rumo).</li>
</ul>
<h3 id="scheduling"><a class="header" href="#scheduling">Scheduling</a></h3>
<ul>
<li>It is no longer possible to enable burying of reviews without also burying new cards,
as Anki excludes buried cards up front, and needs to do so in a particular order
to avoid errors during review.</li>
<li>Fix v3 deck-specific limits affecting the deck list/study screen in v2 mode.</li>
<li>Show custom data from third-party schedulers in stats screen.</li>
<li>Allow burying cards in the browser (thanks to Kaben).</li>
</ul>
<h3 id="fixes"><a class="header" href="#fixes">Fixes</a></h3>
<ul>
<li>Switch to a new Windows TTS implementation, which unblocks future upgrades,
and should perform better (thanks to Rumo).</li>
<li>Work around a startup error some users were receiving on Windows.</li>
<li>Fix currently-selected preset not being indicated in deck options (thanks to Fabricio).</li>
<li>Fix error shown after toggling full screen.</li>
</ul>
<h2 id="changes-in-2157"><a class="header" href="#changes-in-2157">Changes in 2.1.57</a></h2>
<p>More UI improvements/fixes thanks to Matthias, including:</p>
<ul>
<li>The top toolbar area can now take on the color/background of the main window.</li>
<li>The top toolbar appears more subtle during review.</li>
<li>A new option in the preferences to automatically hide the top and bottom bar
during review.</li>
<li>A new option in the preferences to enable a &quot;minimalist&quot; mode that makes the
UI more compact/less fancy.</li>
<li>A new option in the preferences to switch between native styling and the Anki
theme (on Mac/Linux).</li>
<li>The preferences screen has been redesigned to be easier to navigate.</li>
</ul>
<p>Syncing has also been updated:</p>
<ul>
<li>Tweaks to the sync protocol that should be transparent when syncing with
AnkiWeb, but that will break syncing with third-party servers that haven't
been updated yet.</li>
<li>The sync server bundled with Anki has been updated, and now supports syncing
media as well. More information is available on
<a href="https://docs.ankiweb.net/sync-server.html">https://docs.ankiweb.net/sync-server.html</a>.</li>
</ul>
<p>Other changes:</p>
<ul>
<li>Switch to a different library for handling type-in-the-answer comparisons,
which should give more reliable results, and not crash with certain inputs
(thanks to Rumo).</li>
<li>Fix <code>introduced:x</code> not working correctly when negated (thanks to Rumo).</li>
<li>Fix ctrl+enter not working when importing screen first opened.</li>
<li>Fix image dimensions not being correctly constrained (thanks to Hikaru).</li>
<li>Fix incorrect total/average in added graph.</li>
<li>Fix newlines not appearing when importing a csv file with HTML disabled.</li>
<li>Fix quotes preventing field descriptions from showing.</li>
<li>Fix spaces not handled properly when entering text around MathJax (thanks to
Hikaru).</li>
<li>Fix toolbar add-on breakages and introduce toolbar tray layout &amp; API (thanks
to Aristotelis).</li>
<li>Fix type-in-the-answer not supported nested cloze deletions.</li>
<li>Increase delay when adjusting clipboard, which may improve compatibility on
some systems.</li>
<li>Update Windows/Linux builds to Qt 6.4.2.</li>
<li>Fix non-Latin text wrapping in deck options dropdown (thanks to Fabricio).</li>
<li>Fix outer whitespace not being trimmed in type answer.</li>
<li>Fix the future due graph counting learning cards on the wrong day.</li>
<li>Fix deck options screen allowing invalid/blank input.</li>
<li>HTML is now escaped in the deck list.</li>
</ul>
<p>Dev related:</p>
<ul>
<li>Make it easier to override node/protoc binaries during a build (thanks to
Mani)</li>
</ul>
<h2 id="changes-in-2156"><a class="header" href="#changes-in-2156">Changes in 2.1.56</a></h2>
<p>Released 2023-01-09.</p>
<p>If updating from Anki 2.1.49 or below, please see the <a href="https://github.com/ankitects/anki/releases/tag/2.1.50">2.1.50 change notes</a> first.</p>
<p>New features/improvements:</p>
<ul>
<li>Cloze deletions can now be nested inside other cloze deletions (thanks to TRIAEIOU).</li>
<li>Inactive cloze deletions can now be styled with .cloze-inactive (thanks to TRIAEIOU).</li>
<li>Graphs in large collections now load approximately twice as quickly.</li>
<li>Add-on config help is now shown in a webview (thanks to Abdo).</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Fix error popping up 12 hours after starting Anki on macOS and some Linux machines.</li>
<li>Fix unreadable text when searching in sidebar.</li>
<li>Fix fcitx not working on Linux Qt6 package.</li>
<li>Fix old graphs failing to appear.</li>
<li>Fix dark mode display issues on macOS/Qt5.</li>
<li>Don't display a 'timestamps in the future' message after a bulk import.</li>
<li>Fix cloze buttons being disabled in MathJax editor.</li>
<li>Fix images not being constrained to window width when image shrinking disabled.</li>
<li>Fix incorrect macOS minimum version in Qt5 build.</li>
<li>Fix lack of highlight for marked cards in day mode.</li>
<li>Fix pop-up menu in editor sometimes flashing (thanks to Hikaru).</li>
<li>Fix some issues entering text via IME around MathJax area (thanks to Hikaru).</li>
<li>Fix some regressions with the graphs when saving to a PDF.</li>
<li>Fix truncated text on some buttons.</li>
<li>Fix two mpv issues on Windows (thanks to Kelciour).</li>
<li>Tweak focus highlight of some widgets (thanks to Abdo).</li>
</ul>
<p>For devs:</p>
<ul>
<li>Improve web building/reloading experience (thanks to Aristotelis).</li>
<li>Fix an issue building the code with the latest git version.</li>
<li>Fix aqt type completion not working with PyPI wheel.</li>
</ul>
<h2 id="changes-in-2155"><a class="header" href="#changes-in-2155">Changes in 2.1.55</a></h2>
<p>Released 2022-12-16.</p>
<p>Known issues:</p>
<ul>
<li>The old shift+click graphs screen is broken in this release. The regular graphs screen works correctly.</li>
</ul>
<p>Lots of UI improvements, thanks to Matthias:</p>
<ul>
<li>The theme has been reworked, especially on Windows/Linux.</li>
<li>A number of screens like the deck list, editor, deck options and graphs have been re-styled.</li>
<li>Added an option for fields to show the HTML editor by default.</li>
<li>Fields can now be collapsed/expanded. The animation can be disabled in the preferences.</li>
<li>HTML tag auto-close can now be toggled via settings button in editor.</li>
<li>Improve layout for RTL languages.</li>
<li>The editor in the browse screen can now be shown on the right.</li>
<li>The tags area can now be collapsed/expanded (thanks also to Henrik).</li>
<li>On macOS, dark mode now uses the default macOS styling; you can optionally force behavior
like the other platforms with the following in the debug console: <code>mw.pm.set_force_custom_styles(True)</code>.</li>
<li>Many other small tweaks.</li>
</ul>
<p>V3 scheduler improvements, thanks to Rumo:</p>
<ul>
<li>Custom scheduling now supports per-card data, enabling
things like <a href="https://forums.ankiweb.net/t/how-did-i-publish-a-paper-in-acmkdd-as-an-undergraduate-a-fantastic-research-experience-on-spaced-repetition-algorithm-open-source-the-code-and-dataset/23387">FSRS</a>.</li>
<li>Decks can now specify daily limits independently of the deck preset. You can either specify a permanent
override, or one that will reset when the next day comes around.</li>
<li>The Hard button on the first step is now capped to a maximum of 1 day greater than Again.</li>
<li>You should no longer see strange behavior when changing learning steps while cards are in learning.</li>
</ul>
<p>Import/export improvements, thanks to Rumo:</p>
<ul>
<li>The new import/export code is now the default.</li>
<li>When scheduling is included, filtered decks are no longer converted to normal decks.</li>
<li>When a deck is specified in a CSV import, it's now created if missing.</li>
<li>Keep content of unmapped fields when importing CSV.</li>
<li>Various other fixes.</li>
</ul>
<p>Other improvements:</p>
<ul>
<li><code>introduced:x</code> now ignores manual reschedulings (thanks to Rumo).</li>
<li>Anki now opens to the previously-active profile (thanks to Sam).</li>
<li>Card info now refreshes as a card is reviewed (thanks to Rumo).</li>
<li>Close MathJax editor when Esc is pressed (thanks to Abdo).</li>
<li>Double-click on an editor pane to equally split the two sides (thanks to Aristotelis).</li>
<li>Improve Anki's error handling, including some more informative error messages (thanks to Rumo).</li>
<li>Improvements to the MathJax editor (thanks to Henrik).</li>
<li>Make dvipng use transparent background by default (thanks to gnnoh).</li>
<li>Preload images on the front side of a card to reduce pop-in (thanks to Kelciour).</li>
<li>Remember previous choices in reposition dialog (thanks to Sam).</li>
<li>The build system now uses ninja instead of bazel.</li>
<li>The MathJax preview can now be turned off.</li>
<li>The maximum answer time can now be set below 30 seconds.</li>
<li>The way your typed text is compared with the correct answer has been tweaked.</li>
<li>The zoom level is no longer reset when moving between screens.</li>
<li>Updated to Qt 6.4 on Windows/Linux.</li>
<li>You can now control whether images are automatically shrunk or not in the editor.</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Add screen can be closed with Cmd+W on macOS (thanks to Sam).</li>
<li>Add tooltip to More button (thanks to Hikaru).</li>
<li>Cmd+Shift+C cloze shortcut should be more responsive on macOS now.</li>
<li>Fix {{CardFlags}} not working with flags 5-7</li>
<li>Fix an error showing when making network connections on macOS after leaving Anki open for a few days.</li>
<li>Fix browser sidebars appearing in wrong order in RTL mode (thanks to Abdo).</li>
<li>Fix certain installed TTS voices on Windows causing errors.</li>
<li>Fix daily counts being included in apkg import.</li>
<li>Fix fields sticking in add screen when they shouldn't (thanks to Henrik).</li>
<li>Fix flicker when remapping imported notetype field (thanks to Rumo).</li>
<li>Fix font size not being removed when pasting between fields.</li>
<li>Fix incorrect header text alignment in Qt 6.3.1 (thanks to Rumo).</li>
<li>Fix non-admin users having trouble with Anki on macOS.</li>
<li>Fix reviewer shortcuts being inaccessible due to IME</li>
<li>Fix scheduler change not reflected after normal sync.</li>
<li>Fix scrolling with keys/keyboard event listeners not working on answer side (thanks to Hikaru).</li>
<li>Fix sidebar appearing as small window in some cases (thanks to Hikaru).</li>
<li>Fix slow field pin/unpin with large notetype (thanks to Rumo).</li>
<li>Fix styling of pop-over arrows (thanks to BlueGreekMagick).</li>
<li>Fix the UI getting stuck at startup when multiple pop-ups appear (thanks to Sam).</li>
<li>Fixed an issue with the night theme class (thanks to BlueGreenMagick).</li>
<li>Fixed indent/outdent shortcuts not working properly.</li>
<li>Fixed inverted ctrl+right/left handling in RTL fields again (thanks to Abdo).</li>
<li>Fixed shortcuts to select all/delete tags not working (thanks to Hikaru).</li>
<li>Fixed some issues with dragging tags/decks onto other tags/decks (thanks to Abdo).</li>
<li>Improve handling of invalid UTF-8 in DB check.</li>
<li>Improve the appearance of the note/card switch toggle (thanks to Aristotelis).</li>
<li>Make it easier to read add-on errors (thanks to Abdo).</li>
<li>Possible fix for error when copying text in editor</li>
<li>Preserve background color when copy+pasting between fields.</li>
<li>Preserve background-color when pasting external content in light mode.</li>
<li>Suppress the &quot;Unknown error&quot; message that the web toolkit can output on Windows.</li>
<li>Various other fixes.</li>
</ul>
<h2 id="changes-in-2154"><a class="header" href="#changes-in-2154">Changes in 2.1.54</a></h2>
<p>Released 2022-06-24.</p>
<p>A new CSV importer &amp; exporter, thanks to Rumo:</p>
<ul>
<li>Shows a preview based on the selected field separator.</li>
<li>Column mapping includes field text for reference.</li>
<li>Multiple decks and notetypes can now be imported/exported at once, as columns can be mapped to deck or notetype name.</li>
<li>Supports exporting and importing a unique identifier for a note, to use instead of a matching first field. This removes the need for the 'add note id' add-on.</li>
<li>Extends the header syntax so that files can specify metadata such as the desired field separator, and the mapping of fields.</li>
<li>The new functionality is not enabled by default, and can be enabled with a checkbox in the preferences screen. This also enables
the new apkg import/export code introduced in 2.1.52. If you use the Special Fields add-on, you will need to disable this option
in order to use the add-on.</li>
</ul>
<p>Update to Qt 6.3.1:</p>
<ul>
<li>Fixes complex-language input (eg Japanese, Hindi, etc) on macOS being flaky.</li>
<li>Fixes unwanted text when copying from the review screen on Windows.</li>
<li>Fixes a startup failure with certain Linux keyboard configurations.</li>
<li>Due to a change in Qt, you will need to reconfigure your columns in the browse screen after updating.</li>
</ul>
<p>Fixes &amp; improvements:</p>
<ul>
<li>Accept .zip extension when importing add-ons (thanks to Abdo).</li>
<li>Add support for getting light/dark mode status with latest freedesktop standard (thanks to Bart).</li>
<li>Editor API improvements (thanks to Henrik).</li>
<li>Field descriptions in the editor are now shown inline, instead of in a tooltip (thanks to Matthias, Henrik and Hikaru).</li>
<li>Fixed a rounding issue when describing time intervals of a year or more.</li>
<li>Fixed an error that occurred after a one-way download fetched a collection with a different scheduler version enabled.</li>
<li>Fixed desktop hanging when attempting to add a new notetype in KDE (kwin).</li>
<li>Fixed flag names not updating after sync until Anki restarted.</li>
<li>Fixed inability to enter underscore in tags area on some keyboard layouts (thanks to Henrik).</li>
<li>Fixed undo history being cleared and error showing when double-tapping delete in Browse screen.</li>
<li>Provide a way for the review screen to support drop events (thanks to Abdo).</li>
<li>Other minor fixes and improvements.</li>
</ul>
<h2 id="changes-in-2153"><a class="header" href="#changes-in-2153">Changes in 2.1.53</a></h2>
<p>Released 2022-05-28.</p>
<h3 id="editor-improvements"><a class="header" href="#editor-improvements">Editor Improvements</a></h3>
<ul>
<li>Rework image resizing (thanks to Henrik). Images expand to the editor width by default now,
and images that are resized for the editor will remain that way if you switch fields, or
navigate to a different note and back.</li>
<li>Existing height constraints on images are stripped when resizing (thanks to BlueGreenMagick).</li>
<li>The MathJax editor now provides buttons/shortcuts to cloze-delete selected text (thanks to Henrik).</li>
<li>MathJax preview now hides cloze markers.</li>
<li>Style tags are no longer stripped when editing (thanks to Henrik).</li>
<li><code>&lt;br&gt;</code> tags in MathJax are now handled correctly (thanks to Henrik).</li>
<li>MathJax in the review screen now supports mathtools, and available packages in editor and review screen match (thanks to Henrik).</li>
<li>Move focus into HTML editor when hiding normal editor (thanks to Henrik).</li>
<li>Image tags now have the alt property preserved when pasting.</li>
</ul>
<h3 id="other-improvements"><a class="header" href="#other-improvements">Other Improvements</a></h3>
<ul>
<li>Fixed the Qt6 version crashing on some machines.</li>
<li>Custom study no longer includes child decks in available card count in v3 scheduler.</li>
<li>Fixed an error sometimes appearing in the browser when deleting notes (thanks to Rumo).</li>
<li>Fixed automatic backups popping up progress window when Anki minimized.</li>
<li>Fixed cards not being generated after template edits.</li>
<li>Fixed deck options top bar disappearing as you scroll down.</li>
<li>Fixed duplicate Anki icons appearing in dock on macOS.</li>
<li>Fixed duplicate first character in certain ibus configurations (thanks to wisherhxl).</li>
<li>Fixed future due graph incorrectly including new cards.</li>
<li>Fixed initially-incorrect tooltip position in graphs (thanks to BlueGreenMagick).</li>
<li>Fixed some MathJax directives failing to render in editor.</li>
</ul>
<h2 id="changes-in-2152"><a class="header" href="#changes-in-2152">Changes in 2.1.52</a></h2>
<p>Released 2022-05-13.</p>
<h3 id="editor-improvements-1"><a class="header" href="#editor-improvements-1">Editor Improvements</a></h3>
<ul>
<li>Ctrl/Cmd+A in tag editing area now selects all tags (thanks to BlueGreenMagick).</li>
<li>Fixed backspace sometimes removing multiple images at once (thanks to Henrik).</li>
<li>Fixed copying and pasting MathJax on Windows (Qt6).</li>
<li>Fixed handling of <code>&lt;</code> and <code>&gt;</code> symbols in MathJax (thanks to Henrik).</li>
<li>Fixed intermittent editor loading failures when add-ons have injected a large amount of code.</li>
<li>Fixed pasting of local files of unsupported types that contain spaces (thanks to Abdo).</li>
<li>Fixed some formatting being lost when copying between fields on Windows (Qt6).</li>
<li>Fixed various issues with tag editing (thanks to BlueGreenMagick and Henrik).</li>
<li>Pressing tab on the last field now moves focus to tag area (thanks to Henrik).</li>
<li>Reduce size of editor buttons on Windows/Linux (thanks to Henrik).</li>
<li>Tags copied from the tag editor are no longer joined together when pasted into the add tags/remove tags dialogs (thanks to Henrik).</li>
<li>The Qt5 Mac build now caps tag autocomplete matches to 10, as showing more is extremely slow in the old toolkit version.</li>
</ul>
<h3 id="other-improvements-1"><a class="header" href="#other-improvements-1">Other Improvements</a></h3>
<ul>
<li>Update Qt to 6.3.0, which fixes slow loading of large images, and inertial scrolling on macOS.</li>
<li>Fixed an error when previewing cards and selecting multiple cards (thanks to Rumo).</li>
<li>Fixed Anki needing to close when invalid modification times encountered by the browser on Windows.</li>
<li>Fixed colpkg imports not being cancellable (thanks to Rumo).</li>
<li>Fixed current working directory changing on apkg export.</li>
<li>Fixed custom browser font not being honored (Qt6).</li>
<li>Fixed custom study applying the previously-input limit, instead of the current one.</li>
<li>Fixed due graph showing wrong date for review cards in a filtered deck with rescheduling disabled.</li>
<li>Fixed grey background in type answer text + dark mode (thanks to Matthias).</li>
<li>Fixed v3 scheduler allowing one extra card when review limit reached (thanks to Rumo).</li>
<li>Lists on cards are now aligned to the left by default (thanks to Matthias).</li>
<li>Removed the highlight on the Show Answer and Good buttons.</li>
<li>Reset page zoom when moving between different screens.</li>
<li>The Qt6 Linux build now defaults to X11/XWayland instead of Wayland due to some <a href="https://github.com/ankitects/anki/issues/1767">remaining issues</a>; you can force-enable Wayland with ANKI_WAYLAND=1.</li>
</ul>
<h3 id="for-developers"><a class="header" href="#for-developers">For Developers</a></h3>
<ul>
<li>The <code>field_filter</code> hook can now check if it's running for the question or answer side (thanks to Abdo).</li>
<li>Added a <code>av_player_will_play_tags</code> hook (thanks to Abdo).</li>
<li>Make it easier to search in fields programmatically (thanks to Abdo).</li>
</ul>
<h3 id="new-apkg-importexport"><a class="header" href="#new-apkg-importexport">New Apkg Import/Export</a></h3>
<p>This build also includes a new implementation of apkg importing and exporting, thanks to Rumo. Some advantages:</p>
<ul>
<li>Undo/redo is now supported.</li>
<li>Faster imports (especially for decks with a lot of note content).</li>
<li>Support for older clients can be optionally disabled, which results in smaller
apkg files, and faster imports.</li>
<li>Flags are removed when scheduling is excluded.</li>
</ul>
<p>The new functionality is hidden behind a feature flag, and <strong>not active by default</strong>.
You can try it out by using <code>mw.pm.set_new_import_export(True)</code> in the <a href="https://docs.ankiweb.net/misc.html#debug-console">debug console</a>.
To revert to the old behaviour, replace True with False.</p>
<p>Things to note:</p>
<ul>
<li>This is new code that has received limited testing so far, so please use <code>File&gt;Create Backup</code> before trying it out.
Any testing/feedback you can provide would be appreciated.</li>
<li>While active, it is not currently possible to import/export files other than apkg/colpkg.</li>
<li>The Special Fields add-on will not work while this functionality is enabled.</li>
</ul>
<h2 id="changes-in-2151"><a class="header" href="#changes-in-2151">Changes in 2.1.51</a></h2>
<p>Released 2022-04-25.</p>
<p>Changes:</p>
<ul>
<li>Reviews in the V3 scheduler can now optionally be sorted by relative overdueness (thanks to Abdo).</li>
<li>Remember original card position when using 'set due date' on a card (thanks to Rumo).</li>
<li>Improve editor startup time, especially with many fields (thanks to Henrik).</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Fixed compatibility with older macOS versions.</li>
<li>Fixed an issue that was breaking some add-ons when running on Windows without using anki-console.bat</li>
<li>Anki now closes the Browse screen before full sync or colpkg import/export, so it doesn't show errors.</li>
<li>Automatically re-enable disabled add-ons when user explicitly reinstalls them, and improve conflict handling (thanks to Aristotelis).</li>
<li>Fixed an issue with the search history when clicking on items in the sidebar (thanks to Rumo).</li>
<li>Fixed card layout screen opening too wide if card template name was long (thanks to Sam).</li>
<li>Fixed compatibility with 'card info during review' and similar add-ons.</li>
<li>Fixed formatting being turned off when pressing shift (thanks to Henrik).</li>
<li>Fixed full sync not being triggered when changing sort field.</li>
<li>Fixed illegible calendar buttons in dark mode on Mac/Linux.</li>
<li>Fixed stats PDF being illegible when saving in dark mode after scrolling down (thanks to Luka).</li>
<li>Use <code>&lt;b&gt;</code> and <code>&lt;i&gt;</code> formatting tags, instead of <code>&lt;strong&gt;</code> and <code>&lt;em&gt;</code>.</li>
</ul>
<h2 id="changes-in-2150"><a class="header" href="#changes-in-2150">Changes in 2.1.50</a></h2>
<p>Released 2022-04-09.</p>
<h3 id="platform-specific-changes"><a class="header" href="#platform-specific-changes">Platform-Specific Changes</a></h3>
<p>Windows:</p>
<ul>
<li>Windows 10 or 11 is required. If you are still using Windows 7 or 8, 2.1.49 is
the last build that will install on your system.</li>
</ul>
<p>macOS:</p>
<ul>
<li>Anki now supports Apple Silicon natively. If you're on a newer Mac with an M1
processor, pick the qt6-apple download for better performance and battery
life.</li>
<li>The Qt6 x86 build requires macOS 10.14.4</li>
<li>The Qt5 x86 build requires macOS 10.13.4.</li>
</ul>
<p>Linux:</p>
<ul>
<li>The Linux builds need zstd to decompress, eg:</li>
</ul>
<pre><code class="language-sh">sudo apt install zstd
tar xaf anki-2.1.50-linux-qt6.tar.zstd
</code></pre>
<ul>
<li>The packaged version requires glibc 2.28 or later.</li>
<li>A wheel is now provided for ARM64 Linux, and requires glibc 2.31 or greater. See
<a href="https://betas.ankiweb.net/#via-pypipip">this page</a> for instructions on using it.</li>
<li>Both Fcitx4 and Fcitx5 support is now bundled.</li>
</ul>
<h3 id="qt6"><a class="header" href="#qt6">Qt6</a></h3>
<p>Please see the notes for your platform:</p>
<ul>
<li><a href="https://docs.ankiweb.net/platform/windows/installing.html#qt5-vs-qt6">Windows</a></li>
<li><a href="https://docs.ankiweb.net/platform/mac/installing.html#qt5-vs-qt6">Mac</a></li>
<li><a href="https://docs.ankiweb.net/platform/linux/installing.html#qt5-vs-qt6">Linux</a></li>
</ul>
<h3 id="scheduler-changes"><a class="header" href="#scheduler-changes">Scheduler Changes</a></h3>
<p>The V1 scheduler is no longer supported. If you have not yet updated to V2 or
V3, you will be prompted to update when you attempt to review cards in 2.1.50.</p>
<p>This release includes a number of improvements to the V3 scheduler, mostly
thanks to Rumo:</p>
<ul>
<li>Intermediate deck limits now affect their children. Please see the <a href="https://faqs.ankiweb.net/the-2021-scheduler.html#daily-limits">scheduler
page</a> for more
info.</li>
<li>When new cards are answered, Anki now records their original position. When you later
export a shared deck without scheduling, the original positions will be restored.</li>
<li>The Forget action now gives you options to restore the original card position,
and to reset the card's lapse and repetition counters.</li>
<li>The gathering and sorting of new cards has been reworked, trading a little performance
for more intuitive behaviour:
<ul>
<li>It is now possible to sort notes or cards randomly at gather time, ensuring a random
selection is taken from all available new cards.</li>
<li>The gather order and sort order options have been simplified, but should offer the same
functionality as before. Please check your deck options after upgrading, as some users
may need to adjust their display order settings to match what they were using before.</li>
</ul>
</li>
<li>The overview screen now shows how many cards will be buried.</li>
<li>Added a separate option to control burying of interday learning siblings.</li>
<li>Fixed interday learning siblings not being buried during review, causing them
to reappear later after actions like an edit.</li>
<li>If you have more than 2 learning steps, after the first step, Hard repeats the previous
delay, instead of being the average of the previous and next step.</li>
<li>When a Hard learning step exceeds a day, it is now rounded to a full day, so the
delay does not vary depending on the time of day you answer.</li>
<li>Fuzz is applied more evenly now, especially with smaller intervals.</li>
<li>Fixed new cards not decrementing the review limit, which could lead to
more new cards appearing after the review limit was reached.</li>
<li>Review cards and new cards are now interspersed more evenly.</li>
<li>When using Custom Study to extend deck limits in the V3 scheduler, parent/child
limits of the selected deck are no longer adjusted.</li>
</ul>
<h3 id="editor-changes"><a class="header" href="#editor-changes">Editor Changes</a></h3>
<p>Most of these changes are thanks to Henrik.</p>
<ul>
<li>A redesigned editing area, and a redesigned tag editor.</li>
<li>MathJax has a live preview.</li>
<li>HTML source and rendered text can be viewed at the same time.</li>
<li>The HTML editor now matches the current Anki theme.</li>
<li>Images can be resized within the editor.</li>
<li>Fields can now have an optional description/tooltip assigned to them (thanks
to Matthias, Henrik &amp; Rumo).</li>
<li>The &quot;remove formatting&quot; button now offers a choice of what to remove.</li>
<li>Adjust color picker shortcut, and apply color when different color selected.</li>
<li>Reduced editor button size on Windows/Linux (thanks to Matthias).</li>
<li>Fixed IME input after pressing tab.</li>
<li>Fixed media files not being inserted at cursor position on Windows.</li>
<li>Cloze shortcut correctly positions cursor.</li>
<li>Added a separate cloze button to repeat the current cloze.</li>
<li>Lots of behind-the-scenes changes and fixes. Because of the extensive changes,
some add-ons that modify the editing screen will have broken (see the
developers section below)</li>
</ul>
<h3 id="new-features"><a class="header" href="#new-features">New Features</a></h3>
<ul>
<li>Anki will now switch to day or night mode automatically depending on your
system settings. You can force day or night mode in the Preferences screen.
(thanks in large part to Rumo).</li>
<li>Reworked backup handling (mostly thanks to Rumo):
<ul>
<li>Backups are created much faster than they were previously.</li>
<li>Anki can now create backups periodically. The default is every 30 minutes; you can adjust this in the preferences screen.</li>
<li>There are new options in the preferences to control the number of daily, weekly and
monthly backups you'd like to retain.</li>
<li>The File menu now has an option to create a backup immediately.</li>
<li>Because the backup storage format has changed, backups created with 2.1.50 will not be
importable into older Anki versions.</li>
</ul>
</li>
<li>Reworked .colpkg import/export (thanks to Rumo):
<ul>
<li>When exporting, you can optionally target Anki 2.1.50+. When doing so,
imports and exports are faster, and media files will be compressed, but the
resulting .colpkg will not be readable by older Anki clients.</li>
<li>Collections are now checked for corruption when importing.</li>
</ul>
</li>
<li>An option to ignore accents in searches by default has been added to
preferences screen (thanks to Abdo).</li>
<li>The Card Info screen now updates automatically as you change to a different
card (thanks to Rumo).</li>
<li>Added a View menu to the main window and browse window (thanks to Rumo). The
view menu provides options to zoom in and out, and to toggle a full screen
mode. Due to technical issues, the full screen mode is not currently available
on Windows when graphics acceleration is enabled.</li>
<li>A new TTS tag format that allows you to combine extra text and multiple
fields, such as <code>[anki:tts lang=en_US]Here is {{Field1}} and {{Field2}}[/anki:tts]</code> (thanks to Rumo). There are no plans to deprecate the
old TTS syntax - either can be used.</li>
<li>Added an option to add/remove sidebar tag to selected notes (thanks to Rumo).</li>
<li>Be smarter about mapping existing text to new fields when switching notetypes in the Add screen (thanks to Abdo).</li>
<li>Apkg files can now be dragged on the main window to import them (thanks to Abdo).</li>
<li>Added a &quot;Create Copy&quot; option in the browse screen and review screen, to copy
selected note's contents into the Add window (thanks to Rumo).</li>
<li>You can now search for tags by regular expression (thanks to Rumo). One use
for this is locating notes that are tagged with a <code>parent</code> tag, while not matching
ones tagged with <code>parent::child</code>: <code>tag:re:^parent$</code>.</li>
<li>When switching Anki versions, an add-on update check is run on startup (thanks to Rumo).</li>
<li>Make links with <code>target=_blank</code> work (thanks to Danish).</li>
<li>Added &quot;Forget Card&quot; action to review screen (thanks to Araceli).</li>
<li>Added Belarusian and Odia to available languages in the preferences.</li>
<li>Added a silent option (/s) for the Windows uninstaller (thanks to Patric).</li>
<li>Added tooltips to some browser columns (thanks to Rumo).</li>
</ul>
<h3 id="other-improvements-2"><a class="header" href="#other-improvements-2">Other Improvements</a></h3>
<ul>
<li>Added a &quot;Learn&quot; label to the learning counts in the deck list.</li>
<li>Added shortcut keys for creating lists and indentation (thanks to Rumo).</li>
<li>Allow longer maximum answer times in the deck settings (thanks to Bruce).</li>
<li>Behind-the-scenes improvements to the deck and notetype selectors (thanks to Sam).</li>
<li>Change cards/notes toggle to Ctrl/Cmd+Alt+T to avoid conflict on macOS.</li>
<li>Changed the &quot;Previous Card Info&quot; shortcut to avoid a conflict with language input.</li>
<li>Colpkg imports now always require a full sync.</li>
<li>Deck creation in the custom study screen has been reworked, and now supports undo properly (thanks to Rumo).</li>
<li>Don't show error when gsettings exists but does not have a GNOME theme set (thanks to Spooghetti420).</li>
<li>Don't show error when Windows color scheme setting is missing (thanks to qxo).</li>
<li>Fall back on regular file deletion when no recycling bin/trash folder is available on Linux.</li>
<li>Filtered decks in 'order added' now sort by card template.</li>
<li>Fix deck name not updating after deck/notetype renamed (thanks to Hikaru).</li>
<li>Fixed &quot;tag duplicates&quot; possibly operating on stale data (thanks to Ren).</li>
<li>Fixed a number of issues with the preview window (thanks to Hikaru).</li>
<li>Fixed AltGr triggering Ctrl+Alt shortcuts on Windows (thanks to Rumo)</li>
<li>Fixed an error loading the old deck options screen when using Python 3.10.</li>
<li>Fixed an error that could appear when clicking on the sidebar (thanks to qxo).</li>
<li>Fixed an error that could occur in the browser when switching profiles (thanks to Hikaru).</li>
<li>Fixed an error when an installed TTS voice on Windows supported multiple languages (thanks to Rumo).</li>
<li>Fixed an error when exporting a collection with media files in it with very old modification dates (thanks to gnnoh).</li>
<li>Fixed an intermittent error when building on Windows.</li>
<li>Fixed error shown when double-tapping answer buttons on the v3 scheduler.</li>
<li>Fixed errors and display issues when flagging and undoing in the review screen.</li>
<li>Fixed external scripts being executed out of order (thanks to Hikaru).</li>
<li>Fixed field content sometimes spilling outside container (thanks to Hikaru).</li>
<li>Fixed flicker in review screen when referencing external js, and preload css files (thanks to Hikaru).</li>
<li>Fixed incorrect card count in timebox after undo (thanks to Abdo).</li>
<li>Fixed new card position appearing as a date when cards were in preview (thanks to Abdo).</li>
<li>Fixed newly-added deck not being selected in the Add screen (thanks to Hikaru).</li>
<li>Fixed quotation of &quot;and&quot; and &quot;or&quot; in search (thanks to Rumo).</li>
<li>Fixed some parts of the media handling code matching more HTML tags than it should have (thanks to Brayan).</li>
<li>Fixed sound failing to play after exporting a collection (thanks to Rumo and Kelciour).</li>
<li>Fixed the deck list showing up blank in collections with many expanded decks.</li>
<li>Fixed the main window sometimes failing to load properly when Anki starts (which could lead to blank windows, a giant sync icon, etc).</li>
<li>Fixed unwanted <code>&lt;div&gt;</code> being left behind when deleting field contents (thanks to Hikaru).</li>
<li>Fixed various memory leaks (thanks to Rumo and Hikaru).</li>
<li>Flip sidebar location in RTL mode (thanks to Abdo).</li>
<li>Hide &quot;open new window&quot; action in GNOME (thanks to Fusion future &amp; Felipe)</li>
<li>Improve search highlight color in templates screen (thanks to Abdo).</li>
<li>Improved display of the card info screen (thanks to Rumo).</li>
<li>Improved localization of large numbers in the graphs, and various layout tweaks (thanks to Vova).</li>
<li>Improved performance with large selections in the Browse screen (thanks to Rumo).</li>
<li>Improvements to the Change Notetype screen (thanks to Matthias).</li>
<li>Performance improvements for searching through many fields with a wildcard search (thanks to Rumo).</li>
<li>Randomized card positions now start at 1, which avoids a corner case in filtered deck scheduling.</li>
<li>Reduced flicker when opening browser in night mode (thanks to Rumo).</li>
<li>Report correct count in timebox screen with v2 scheduler (thanks to Abdo).</li>
<li>Rows with database inconsistencies in the browse screen now prompt you to use &quot;check database&quot; instead of saying they were deleted (thanks to Rumo).</li>
<li>Some behind-the-scenes code improvements (thanks to Sam).</li>
<li>Support autoplay in audio tags again (thanks to Andreas).</li>
<li>Support Markdown inside HTML tags in config.md (thanks to Abdo).</li>
<li>The 'future due' graph no longer shows learning cards in a filtered deck as being due a long time ago.</li>
<li>The <code>note:</code> and <code>card:</code> searches no longer do a substring match (thanks to Rumo).</li>
<li>The Add Cards screen will no longer allow accidental triggering of main window shortcuts when it is open on a Mac (thanks to Rumo).</li>
<li>The calendar graph uses consistent coloring as years are changed (thanks to Ryan).</li>
<li>The custom study screen no longer (sometimes incorrectly) limits the amount you can extend the daily limits by.</li>
<li>The top and bottom bars will no longer zoom in/out, but the main area and editors can be zoomed in and out (thanks to Rumo).</li>
<li>Truncate deck names in the deck list if they are too long (thanks to Sachin).</li>
<li>Tweaks to the sidebar icons (thanks to Henrik).</li>
<li>Updated translations - thanks as always to all the translators.</li>
<li>Use white menubar on Windows (thanks to Rumo).</li>
<li>Various behind-the-scenes fixes (thanks to Arthur).</li>
<li>Various improvements to right-to-left display (thanks to Abdo).</li>
<li>When Anki encounters an issue with a card template, it now provides a link to a help page with more information (thanks to Rumo).</li>
<li>Numerous other fixes and contributions, thanks to Rumo, Henrik, Abdo, Matthias,
Evandro, Arthur, Soren, BlueGreenMagick, Yoshi, Jakub, Gesa, blue-putty,
stopendy, TheFeelTrain and zjosua.</li>
</ul>
<h3 id="for-developers-1"><a class="header" href="#for-developers-1">For Developers</a></h3>
<ul>
<li>Anki now requires Python 3.9.</li>
<li>Anki contains some compatibility shims that should allow many add-ons written
for PyQt5 to work with PyQt6 as well (thanks to Aristotelis). These shims will
not remain forever, so it is recommended that you update your add-ons to be
compatible with Qt6 without shims. The two main breakages are the renaming of
PyQt5 to PyQt6 (you can support both by importing from aqt.qt instead), and
the requirement that <a href="https://github.com/ankitects/anki/pull/1406/commits/a7812dedc096627692ab3d7e64b90be632f52134">enums are
qualified</a>.</li>
<li>If youâ€™re using Qt Designer to generate UI files, the Qt5 and Qt6 versions
need to be generated and bundled separately if you want to support both at once.</li>
<li>PyQt6 does not support the Qt resource system (pyrcc was removed), so Anki now
uses a different approach, and urls like <code>:/icons/foo.jpg</code> should become
<code>icons:foo.jpg</code>.</li>
<li>Henrik has spent a lot of time working out how to smoothly provide an API for
the editor, and investigating how we can provide types to make targeting the API
easier. This has required a number of refactorings, and some add-ons that were
accessing the editor will have broken in this update. While the code is
not set in stone yet, hopefully we're getting there. An example of using the
latest API is available here: <a href="https://github.com/hgiesel/anki_new_format_pack/commits/master">https://github.com/hgiesel/anki_new_format_pack/commits/master</a></li>
<li>The way Anki is packaged has changed. Most of the standard library should be
available now. If you notice any problems importing standard libraries that
previously worked, please let us know.</li>
<li>The aqt package no longer depends on PyQt, as either version 5 or 6 is supported.
You can specify the major version you want when installing - eg <code>pip install 'aqt[qt6]'</code></li>
<li>manifest.json now supports a 'homepage' argument (thanks to Abdo)</li>
<li><code>mw.progress.timer()</code> should now be passed a <code>parent</code> argument, as the
previous default of using <code>mw</code> prevents the timers from being freed after they
are no longer active. If you want a permanent timer, pass <code>mw</code> in as the parent.</li>
<li>Improved Python code completion/type handling in VS Code (thanks to Rumo).</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-2140-to-49"><a class="header" href="#changes-in-2140-to-49">Changes in 2.1.40 to 49</a></h1>
<ul>
<li><a href="changes/2.1.40-49.html#changes-in-2149">Changes in 2.1.49</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2148">Changes in 2.1.48</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2147">Changes in 2.1.47</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2146">Changes in 2.1.46</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2145">Changes in 2.1.45</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2144">Changes in 2.1.44</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2143">Changes in 2.1.43</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2142">Changes in 2.1.42</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2141">Changes in 2.1.41</a></li>
<li><a href="changes/2.1.40-49.html#changes-in-2140">Changes in 2.1.40</a></li>
</ul>
<h2 id="changes-in-2149"><a class="header" href="#changes-in-2149">Changes in 2.1.49</a></h2>
<p>Released 2021-10-26.</p>
<ul>
<li>Fixed cards not being automatically unburied when v3 scheduler enabled.</li>
<li>Fixed incorrect learning count in v3 scheduler when interday learning cards
were queued (thanks to Rumo).</li>
<li>Work around an AnkiDroid inconsistency causing deck config to be reset if options
edited on AnkiDroid.</li>
<li>Fixed a memory leak in the Preview screen (thanks to Hikaru).</li>
<li>Fixed an issue copying filenames from the Check Media screen (thanks to Abdo).</li>
<li>Fixed deck changing when toggling sticky fields (thanks to Abdo).</li>
<li>Fixed invalid default column in notes mode in the Browse screen (thanks to Abdo).</li>
<li>The bury command ignores suspended cards now (thanks to Rumo).</li>
<li>Anki no longer migrates any files from the old ~/Documents/Anki and ~/Anki folders.</li>
<li>Increased number of card templates shown in card templates screen dropdown (thanks to Evando).</li>
<li>Added a new example Dockerfile (thanks to Jakub).</li>
<li>Handle spaces in Linux install location (thanks to lolilo).</li>
<li>Work around a PyQt error on Python 3.10.</li>
<li>Other minor changes.</li>
</ul>
<h2 id="changes-in-2148"><a class="header" href="#changes-in-2148">Changes in 2.1.48</a></h2>
<p>Released 2021-09-21.</p>
<ul>
<li>Add &quot;Previous Card Info&quot; action to review screen (thanks to Evandro).</li>
<li>Fix flag names not updating on profile switch (thanks to Rumo).</li>
<li>Hide &quot;Rename with Parents&quot; for top-level items (thanks to Rumo).</li>
<li>&quot;Add Field&quot; action now correctly handles multi-word font names.</li>
<li>Fix newline being added when coloring text (thanks to Henrik).</li>
<li>Fix incorrect system font when running Anki in some non-English languages.</li>
<li>Fix learning count sometimes jumping to a large number in the v3 scheduler.</li>
<li>Another fix for Reposition command not working on buried/suspended cards.</li>
<li>Preserve focus when changing notetype in the Add screen.</li>
<li>Wayland can now be optionally enabled with an env var in the packaged builds,
but remains off by default due to a number of bugs.</li>
<li>Fix an error message that could appear when deleting notes (thanks to Rumo).</li>
<li>The card templates screen no longer defaults to filling empty fields when
opened from the Add screen (thanks to BlueGreenMagick).</li>
<li>Miscellaneous other fixes.</li>
</ul>
<h2 id="changes-in-2147"><a class="header" href="#changes-in-2147">Changes in 2.1.47</a></h2>
<p>Released 2021-08-29.</p>
<p>Changes to the <a href="https://faqs.ankiweb.net/the-2021-scheduler.html">v3 scheduler</a>:</p>
<ul>
<li>Interday learning cards are included in the learning count again, instead of
the review count.</li>
<li>Interday learning cards are still affected by the review limit. Interday
learning cards are fetched first, then reviews, and finally new cards.</li>
<li>Filtered decks with rescheduling disabled now log reviews, so the reviews will
appear in your graphs.</li>
<li>Added an option to sort reviews by ascending/descending ease.</li>
<li>Fixed an issue where an error message could appear after undoing/redoing a mix
of reviews and other changes.</li>
<li>Fixed custom scheduling not working.</li>
</ul>
<p>Other changes:</p>
<ul>
<li>The &quot;timebox finished&quot; message is now shown on card answer, instead of after
revealing the next card. This should also address an issue where the message
popped up outside of review.</li>
<li>Added shortcut for Forget in the Browse screen.</li>
<li>Fixed an error being shown when there was no current deck.</li>
<li>Fixed incorrect quoting in duplicate search (thanks to Abdo).</li>
<li>Fixed deck options inverting the &quot;replay question when showing answer&quot; option.</li>
<li>Fixed an issue with ampersands in the Add Cards history button (thanks to
Arthur).</li>
<li>Fixed handling of audio/video tags (thanks to Hikaru).</li>
<li>Fixed errors playing audio when computer was slow to respond (thanks to Kelciour).</li>
<li>Fixed preferences screen not updating undo menu, and causing an error when
subsequently reviewing a card in the v3 scheduler.</li>
<li>Fixed case changes being ignored in tag rename.</li>
<li>Fixed error shown when DB check run on corrupt collection.</li>
<li>Fixed deck options prompt showing the default deck, instead of the correct one.</li>
<li>Fixed reposition command ignoring suspended cards.</li>
<li>Fixed answer button highlight on Windows (thanks to Henrik).</li>
<li>Fixed calendar graph day labels showing incorrectly in some timezones.</li>
<li>Improved validation of add-on package names (thanks to BlueGreenMagick for the
report and initial fix).</li>
</ul>
<p>For add-on developers:</p>
<ul>
<li>The Svelte components Anki exports should now work correctly in add-ons,
provided they exclude Svelte when bundling.</li>
<li>WithShortcut is now also available.</li>
</ul>
<h2 id="changes-in-2146"><a class="header" href="#changes-in-2146">Changes in 2.1.46</a></h2>
<p>Released 2021-08-04.</p>
<ul>
<li>Fix duplicate text when pasting with Ctrl+Shift+V (thanks to Henrik).</li>
<li>Remember last colors in editing window (thanks to Henrik).</li>
<li>Show flag and mark icons in preview window (thanks to Hikaru).</li>
<li>Center first match when searching in sidebar (thanks to Abdo).</li>
<li>Added F9/Shift+F9 shortcuts for sticky fields, and increase opacity (thanks to
Henrik).</li>
<li>Fixed starting ease specified in deck options not being used by v3 scheduler.</li>
<li>Fixed learning cutoff not updating during review, and some learning cards
remaining at the end of review in the v3 scheduler.</li>
<li>Fixed Change Notetype not mapping fields correctly when count differed.</li>
<li>The congrats screen now updates periodically again.</li>
<li>Fixed Redo menu item showing Undo action name.</li>
<li>Fixed notetype selection in the import screen.</li>
<li>Fixed error in overview/congrats screen when there is no current deck.</li>
</ul>
<h2 id="changes-in-2145"><a class="header" href="#changes-in-2145">Changes in 2.1.45</a></h2>
<p>Released 2021-07-30.</p>
<p>Undo handling:</p>
<ul>
<li>Most actions now support multiple undo steps. You can change a card template,
delete some notes, bury a card, then undo each of those steps if you wish.</li>
<li>Actions that support multiple undo steps will now save the changes
immediately, meaning that if Anki crashes, the changes you made in the last
few minutes will no longer be lost.</li>
<li>Most undoable actions can now be redone, so you can undo an accidental undo.</li>
<li>Actions that don't support the new undo handling (eg, Check Database), will
clear the undo history.</li>
<li>Add-ons will clear the undo history if they modify the database directly, or
use routines that don't support undoing. There are some new routines available
to add-ons to make operations undoable, but add-ons may need to be updated
to use them.</li>
</ul>
<p>Scheduling changes:</p>
<ul>
<li>A new scheduler is available, with a number of improvements. Please see the
<a href="https://faqs.ankiweb.net/the-2021-scheduler.html">2021 scheduler page</a> for
more information.</li>
<li>The deck list now shows the learning count separately.</li>
<li>On new collections, the v2 scheduler is now the default.</li>
<li>Set due date uses the deck's configured starting ease (thanks to cyphar).</li>
</ul>
<p>Browser changes, mostly thanks to Rumo:</p>
<ul>
<li>The sidebar now has two modes. The default allows clicking on items to search
for them. The other mode allows you to select multiple items at once, so you
can drag &amp; drop or delete multiple items.</li>
<li>The browse screen can now be toggled between showing cards,
and showing notes.</li>
<li>When showing notes, some columns will show an aggregate over all the
cards of a note.</li>
<li>Added an introduced:x search to locate cards first studied in the last x days.</li>
<li>Column rendering has been moved into the backend, and will be faster than
before (but is still limited by the speed of the graphics toolkit).</li>
<li>A fair bit of the browser code has been changed, and some add-ons like the
&quot;Advanced Browser&quot; add-on will need to be updated to support the new approach.</li>
<li>New tag icons and associated backend work (thanks to Henrik).</li>
<li>Added an option in the Preferences screen to customize the starting
search text (eg, to start with &quot;deck:current&quot;).</li>
<li>More reliably scroll to the current card.</li>
<li>When opening the Browse screen with an active study card, the whole
deck is now shown.</li>
<li>Added 3 new flag colours.</li>
<li>Flags can now be renamed in the sidebar.</li>
<li>Horizontal scrolling in the browse screen is less jumpy.</li>
<li>Sidebar items can be dragged onto the Saved Searches area to add them as a favourite.</li>
</ul>
<p>Editor changes, mostly thanks to Henrik:</p>
<ul>
<li>A new editor toolbar implementation, with improved icons and handling.</li>
<li>The editor now provides bullet and numbered list buttons.</li>
<li>The editor now provides buttons to control text alignment and indent.</li>
<li>Sticky fields can now be toggled on/off from the editing screen.</li>
<li>A new API is available for add-ons, and the existing API should continue
to work.</li>
<li>The HTML editor is now shown inline, and supports syntax highlighting,
and showing opening/closing tags.</li>
<li>Warn user when they attempt to use cloze markers inappropriately
(thanks to Rumo).</li>
</ul>
<p>State handling:</p>
<ul>
<li>When you make changes, the user interface should update more consistently now.
Adding a new tag to a note will update the sidebar in the Browse screen for
example, and when you review a card that is shown there, the columns will
update.</li>
<li>The Browse screen no longer refreshes a search automatically. When you make a
change, the column text may update, but the number of rows will not change.
Deleted cards show &quot;(deleted)&quot; until you search again.</li>
<li>The main window no longer shows a &quot;waiting for editing to finish&quot; screen. When
you make changes such as editing a note, the main window will dim, and will
automatically refresh when you return to it.</li>
</ul>
<p>The deck options screen has been reimplemented:</p>
<ul>
<li>(Re)learning steps are now shown with units, eg 10m or 4d.</li>
<li>Deck options are now shown on one scrollable page.</li>
<li>Extra help is available for most options.</li>
<li>It is easy to see at a glance which options have been changed from the
default, and individual options can be reverted to the default setting.</li>
<li>Warnings will be shown for some common issues (eg, review limit too low
compared to new cards).</li>
<li>Some of the more advanced options have been moved to a separate &quot;Advanced&quot;
section.</li>
<li>The old options can be accessed with a Shift+click, since it will take a while
for add-ons to be updated to support the new screen. A new API is available,
thanks to Henrik.</li>
<li>The deck description is now accessible via a button in the overview screen,
instead of via the deck options.</li>
</ul>
<p>Other features:</p>
<ul>
<li>An updated Change Notetype implementation, that can match fields by name, and
allows you to map a source field to multiple destination fields in order to
clone a field.</li>
<li>Pre-load images on answer side (thanks to Hikaru).</li>
<li>The <code>[...]</code> in cloze deletions is now read as &quot;blank&quot; by TTS (thanks to Rumo).</li>
<li>The Find&amp;Replace option in the Browse screen can now be used on tags as well.</li>
<li>Added a Card Info option to the review screen.</li>
<li>When opening deck option from the study screen, you'll now be asked which deck
you want if the card is in a subdeck.</li>
<li>You can now choose which add-ons you want to update (thanks to BlueGreenMagick).</li>
<li>Support system SSL certs on Linux.</li>
<li>Extra checks are now done when updating a card template, such as detecting when
a cloze notetype is missing a cloze directive, or two templates have identical question sides (thanks to Rumo).</li>
<li>Support Ctrl+Numpad Enter to add cards.</li>
<li>Added night mode styling to 'type in the answer' box, and improve legibility
of comparison.</li>
<li>Sidebar search now scrolls to first match (thanks to Abdo &amp; Rumo).</li>
<li>F3/F4 in card layout screen go to next/previous template (thanks to Evandro).</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Custom study now limits the tag selection to 100 tags or fewer, to prevent errors caused by exceeding database limits.</li>
<li>Fixed an issue compiling on recent Python 3.9 installs.</li>
<li>Fixed audio getting stuck when pausing near end (thanks to kelciour).</li>
<li>Fixed building on linux-arm64 (thanks to qubist-pixel-ux).</li>
<li>Fixed Card Info screen not ignoring manual rescheduling when calculating the average time.</li>
<li>Fixed crash when pressing the copy shortcut with no active selection.</li>
<li>Fixed current review card sometimes changing when making edits.</li>
<li>Fixed deck options tooltip appearance (thanks to Matthias).</li>
<li>Fixed escaping of hyphens in searches (thanks to Rumo).</li>
<li>Fixed field pin status being forgotten when opening Cards screen (thanks to Henrik).</li>
<li>Fixed incorrect card count when removing multiple templates.</li>
<li>Fixed incorrect font on Windows (thanks to Kelciour).</li>
<li>Fixed resource leak in sound code (thanks to Kelciour).</li>
<li>Fixed some instances of a flash when revealing answer on cards with images.</li>
<li>Fixed text with single quote not being escaped in export (thanks to Ryan).</li>
<li>Fixed various links to the manual (thanks to cherryblossom000).</li>
<li>Fixed red duplicate background being included in copy+paste (thanks to Hikaru).</li>
<li>Fixed flags not being excluded on export (thanks to Alex).</li>
<li>Force x11 mode when the packaged build is run on a system that tells Qt to use
Wayland, as Wayland is not currently supported by the packaged build.</li>
<li>Numerous behind-the-scenes improvements from Henrik and Rumo.</li>
<li>Other fixes and improvements, thanks to Abdo, Glutanimate, Arthur, Shaun,
hkr and others.</li>
<li>Strip invalid unicode from filenames in media check.</li>
<li>Performance improvements and other miscellaneous fixes.</li>
</ul>
<p>A big thank you to everyone who contributed, including people who contributed translations,
and those who helped test out the beta releases and provided feedback.</p>
<p>Add-on authors, there are <a href="https://forums.ankiweb.net/t/add-on-porting-notes-for-anki-2-1-45/11212">some notes</a> on porting add-ons to 2.1.45 available.</p>
<h2 id="changes-in-2144"><a class="header" href="#changes-in-2144">Changes in 2.1.44</a></h2>
<p>Released 2021-05-04.</p>
<ul>
<li>Search text is no longer automatically quoted/interspersed with ANDs.</li>
<li>Fix two backslashes being treated as one in MathJax.</li>
</ul>
<h2 id="changes-in-2143"><a class="header" href="#changes-in-2143">Changes in 2.1.43</a></h2>
<p>Released 2021-04-03.</p>
<ul>
<li>The reviewing screen will now wait for up to 100ms
for images to load before showing, and waits until images
have been loaded before scrolling to the answer.</li>
<li>The default fade-in on the review screen has been removed.</li>
<li>Fix DB check incorrectly identifying an issue after
lapsing a card with a non-zero interval % in the V1 scheduler.</li>
<li>Fix editing toolbar being initially active (thanks to Henrik).</li>
<li>Fix some error messages (thanks to Rumo).</li>
<li>Fix expand/collapse triggering click in sidebar (thanks to BlueGreenMagick).</li>
<li>Update translations, thanks to the translators.</li>
<li>Fix &quot;Forgot Card&quot; message.</li>
<li>Fix deck list not updating after deleting.</li>
</ul>
<h2 id="changes-in-2142"><a class="header" href="#changes-in-2142">Changes in 2.1.42</a></h2>
<p>Released 2021-03-10.</p>
<ul>
<li>Fix sync downloads failing when temp folder on separate partition.</li>
<li>Fix RTL fields (thanks to Abdo).</li>
<li>Fix issues with field focusing and caret positioning (thanks to Henrik).</li>
<li>Strip comments when pasting HTML (thanks to Abdo).</li>
<li>Don't forget CSV delimeter when canceling dialog (thanks to Benjamin).</li>
<li>Fix stale caches after rolling back to a checkpoint (thanks to Rumo).</li>
</ul>
<p>For build hashes, please see the <a href="https://github.com/ankitects/anki/releases">GitHub releases
page</a>.</p>
<h2 id="changes-in-2141"><a class="header" href="#changes-in-2141">Changes in 2.1.41</a></h2>
<p>Released 2021-03-07, build 312fa278.</p>
<p>Browser improvements:</p>
<ul>
<li>Tags now show in a tree (thanks to Abdo).</li>
<li>Added a search bar to the sidebar (thanks to Abdo).</li>
<li>New context menu actions to rename or remove tags and their children, rename
decks, manage notetypes, and rename/remove saved searches (thanks to Abdo
and BlueGreenMagick).</li>
<li>The preview button in the browse screen has moved into the editing area (thanks to Henrik).</li>
<li>With the improved sidebar, a number of options have been removed from the Filter button.</li>
<li>The remaining items in the Filter button have been moved into the sidebar, and
the Filter button removed.</li>
<li>Tags and decks can now be dragged and dropped in the sidebar.</li>
<li>Each section can now be expanded/collapsed.</li>
<li>&quot;Due&quot; now shows only cards due that day.</li>
<li>Added &quot;Overdue&quot; item.</li>
<li>Click on Decks to show whole collection.</li>
<li>Click on Flags to show any flag.</li>
<li>Click on Tags to show all non-empty tags.</li>
<li>Added &quot;Untagged&quot; under Tags.</li>
</ul>
<p>Editing improvements:</p>
<ul>
<li><code>&lt;br&gt;</code> tags will now be used by default instead of the previous <code>&lt;div&gt;</code>
tags, which solves some issues with multiple lines in cloze deletions and
MathJax (thanks to Henrik).</li>
<li>The tags field in the editor now autocompletes from anywhere in a tag name,
not only the start.</li>
<li>Invalid field content can no longer spill out into the editing area (thanks to Henrik).</li>
</ul>
<p>Search improvements:</p>
<ul>
<li>Searches are now rewritten into a canonical format (eg <code>one two</code> becomes
<code>&quot;one&quot; AND &quot;two&quot;</code>) (thanks to Rumo).</li>
<li>Search error messages are now much more specific (thanks to Rumo).</li>
<li>is:learn, is:due and prop:due now handle more cases, such as suspended cards
(thanks to Henrik).</li>
<li>Added prop:pos search to search for new card position (thanks to Abdo).</li>
<li>Added a shortcut to replace part of a search with a different search
(eg changing the selected deck) (thanks to Rumo).</li>
<li>Support resched:x for searching for cards that were manually rescheduled
in x days (thanks to Henrik).</li>
<li>Support prop:rated/resched to search for rated/rescheduled cards over
specific time periods (thanks to Henrik).</li>
<li>Filtered decks can now be created from a browser search, and vice versa (thanks to Rumo).</li>
<li>Filtered deck screen now has a link to show cards not matched by search (thanks to Rumo, Abdo).</li>
<li>Better ergonomics for developers (thanks to Rumo).</li>
</ul>
<p>Graph improvements:</p>
<ul>
<li>A number of the graphs can now be clicked on to search for the cards
displayed by the graph (thanks to Henrik).</li>
<li>The starting day of week can now be altered in the Calendar graph (thanks to Henrik).</li>
<li>The Card Counts graph now supports toggling separate suspended/buried counts (thanks to Henrik).</li>
<li>The intervals and ease graphs now covers more cases, such as suspended cards
(thanks to Henrik).</li>
<li>Place less emphasis on outliers in the Calendar graph (thanks to Henrik).</li>
<li>Ignore manually scheduled cards in hour graph.</li>
</ul>
<p>Scheduler improvements:</p>
<ul>
<li>The V2 scheduler no longer applies parent review limits to child decks.
Previously the limits were inconsistently applied, which could lead to the
deck list not reflecting the actual number of cards you'd receive when you
clicked on a deck. AnkiMobile and AnkiWeb have been updated to match this
behaviour, and AnkiDroid will also be updated soon. Using 2.1.41 in
conjunction with older clients will not cause any problems when syncing, but
you may find the deck list/review counts do not match.</li>
<li>The V1-&gt;V2 upgrade process no longer resets cards that are in learning, or
removes cards from filtered decks.</li>
<li>Users on the old scheduler will now see a message at the top of the deck
list prompting them to update to the Anki 2.1 scheduler.</li>
<li>There is no option to downgrade to the V1 scheduler anymore, though you can
still do so by downgrading to an older Anki version first.</li>
</ul>
<p>Reworked the Reschedule tool:</p>
<ul>
<li>Split into separate &quot;Forget&quot; and &quot;Set Due Date&quot; actions</li>
<li>&quot;Set Due Date&quot; defaults to not adjusting the card interval.</li>
<li>Changed the &quot;Delete Tags&quot; shortcut; Ctrl+Shift+D now changes the due date.</li>
<li>Added the action to the review screen as well.</li>
<li>Input now remembered.</li>
</ul>
<p>Other changes:</p>
<ul>
<li>A basic sync server is now built into Anki. It does not yet support
media. Docs are in the docs/ folder of the source tree.</li>
<li>The title bar on Macs will now turn dark when night mode is activated.</li>
<li>Deck descriptions of the congratulations screen can be enabled by turning markdown
on in the deck options, but only 2.1.41+ will be able to render the markdown.</li>
<li>Add opus to media list in editor.</li>
<li>Edit/More buttons auto-hide when window is small (thanks to Henrik).</li>
<li>Support Alt+number to switch between clozes in the card layout screen (thanks to Abdo).</li>
<li>Use monospace font in HTML editor.</li>
<li>Improve error message when trying to nest under a filtered deck (thanks to Rumo).</li>
<li>Reposition dialog's &quot;shift cards&quot; option now defaults to off.</li>
<li>Other fixes and improvements thanks to Henrik, Rumo, Abdo, Arthur, Maksim, Guillem,
stayingpeachy, Daniel, khonkhortisan and Kerrick.</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Fix the Reposition command not preserving the browser sort order.</li>
<li>Fix some issues causing the sync indicator to show unnecessarily (thanks to Rumo).</li>
<li>Fix slowdown after large &quot;check media&quot; report.</li>
<li>Fix a spurious warning about a full sync when renaming card templates.</li>
<li>Fix a freeze when answering a card with a missing parent deck.</li>
<li>Fix Anki not working after installing on Linux over a previous install.</li>
<li>Don't log card resets when exporting.</li>
<li>Fix congrats screen not showing when learning cards were due soon.</li>
<li>Updated bundled lame and mpv on Windows and Mac builds.</li>
</ul>
<p>For developers:</p>
<ul>
<li>Add-on authors, please see
<a href="https://forums.ankiweb.net/t/add-on-porting-notes-for-anki-2-1-41/7390">https://forums.ankiweb.net/t/add-on-porting-notes-for-anki-2-1-41/7390</a></li>
<li>Almost all of the Python codebase now has type hints. ðŸŽ‰</li>
<li>JS libraries like jQuery have been updated (thanks to Henrik).</li>
<li>Add (untested) support for ARM64 Linux.</li>
<li>orjson is turned back into an optional requirement (though is still
recommended, as it's faster).</li>
<li>The sidebar code has been moved from from browser.py into sidebar.py, which
may break some add-ons.</li>
</ul>
<h2 id="changes-in-2140"><a class="header" href="#changes-in-2140">Changes in 2.1.40</a></h2>
<p>Released 2021-02-07, build cf446733.</p>
<ul>
<li>Fixed backup not being made when choosing &quot;Download&quot; when syncing.</li>
<li>Fixed a slowdown after importing.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-2130-to-39"><a class="header" href="#changes-in-2130-to-39">Changes in 2.1.30 to 39</a></h1>
<ul>
<li><a href="changes/2.1.30-39.html#changes-in-2139">Changes in 2.1.39</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2138">Changes in 2.1.38</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2137">Changes in 2.1.37</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2136">Changes in 2.1.36</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2135">Changes in 2.1.35</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2134">Changes in 2.1.34</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2133">Changes in 2.1.33</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2132">Changes in 2.1.32</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2131">Changes in 2.1.31</a></li>
<li><a href="changes/2.1.30-39.html#changes-in-2130">Changes in 2.1.30</a></li>
</ul>
<h2 id="changes-in-2139"><a class="header" href="#changes-in-2139">Changes in 2.1.39</a></h2>
<p>Released 2021-02-02, build 576f0043.</p>
<ul>
<li>Fix the Reposition command not preserving the browser sort order.</li>
<li>Fix some issues causing the sync indicator to show unnecessarily (thanks to Rumo).</li>
<li>Fix a spurious warning about a full sync when renaming card templates.</li>
<li>Fix Anki not working after installing on Linux over a previous install.</li>
<li>Don't log card resets when exporting.</li>
<li>Fix congrats screen not showing when learning cards were due soon.</li>
<li>Updated bundled lame and mpv on Windows and Mac builds.</li>
<li>Other fixes and improvements, with thanks to Henrik, Rumo, Abdo, Arthur, Guillem, Meredith, Gustavo, and Daniel.</li>
</ul>
<h2 id="changes-in-2138"><a class="header" href="#changes-in-2138">Changes in 2.1.38</a></h2>
<p>Released 2020-12-26, build 355e4cd5.</p>
<ul>
<li>Use a new approach for recording audio. If you encounter any issues,
the old PyAudio driver can be selected in the Preferences screen. The old
driver will likely be retired in the future, so please let us know
if the default system does not work for you.</li>
<li>All built-in Windows TTS voices should now be supported on recent Windows 10
releases (thanks to Ryan).</li>
<li>Fix the Reposition tool in the Browse screen not following the sort
order.</li>
<li>Reduce the default fade time in the review screen.</li>
<li>The ANGLE video driver can now be selected in the Preferences on Windows.</li>
<li>Fix some instances of the sync indicator remaining on after sync (thanks to Rumo).</li>
<li>Work around --text-fg appearing in fields.</li>
<li>Fix link in about screen (thanks to Abdo).</li>
<li>Fix '1' being shown instead of the correct number in some Russian translations.</li>
<li>Fixed invisible characters when adding new card templates (thanks to Henrik).</li>
<li>Fixed duplicate check getting confused by non-breaking spaces (thanks to abdo).</li>
<li>Don't throw error when computer hostname is invalid.</li>
<li>Other minor changes (thanks to Henrik &amp; k12sh)</li>
</ul>
<p>For developers:</p>
<ul>
<li>Protobuf binaries are now used to speed up the initial build.</li>
<li>Fixed Python code completion, and added some info to docs/development.md</li>
<li>./run now runs Anki with Python warnings enabled - PRs that fix any that come
up would be welcome (thanks cecini for the first!)</li>
</ul>
<h2 id="changes-in-2137"><a class="header" href="#changes-in-2137">Changes in 2.1.37</a></h2>
<p>Released 2020-12-12, build 6d596c8f.</p>
<ul>
<li>Fixed filtered decks not honoring sort order.</li>
<li>Fixed review screen not automatically scrolling to answer (thanks to Henrik).</li>
<li>The deck options screen now limits minimum ease to 131%.</li>
</ul>
<p>For developers:</p>
<ul>
<li>Added a scripts/build command to build the redistributable wheels.</li>
<li>The Rust worker is disabled by default, as some users had trouble building with it.</li>
</ul>
<h2 id="changes-in-2136"><a class="header" href="#changes-in-2136">Changes in 2.1.36</a></h2>
<p>Released 2020-12-09, build c505894b.</p>
<p>Notable changes:</p>
<ul>
<li>Alternate builds have been discontinued. If you are using a 32 bit system, or
a macOS version older than 10.13, Anki 2.1.35 is the last release you will be able
to update to.</li>
<li>MathJax has been updated to version 3, thanks to Henrik. It should render faster
than before. If you were customizing the MathJax configuration using Javascript,
you will need to
<a href="https://github.com/ankitects/anki/pull/809#issuecomment-721438738">use a new method</a>.</li>
<li>A separate mpv process is now used to play videos on Windows, which should
solve issues with playing getting stuck, thanks to Kelciour.</li>
<li>The handling of wildcards and escape characters in search <a href="https://docs.ankiweb.net/searching.html#matching-special-characters">has been
reworked</a>
to be more consistent, thanks to Rumo.</li>
<li>Early startup messages are now translable, thanks to Abdo.</li>
<li>When cards are rescheduled in the browse screen, a review entry log is now created.</li>
<li>The main card area is now focused instead of the bottom area during review,
which allows using the keyboard to scroll, thanks to Henrik.</li>
</ul>
<p>Bugfixes:</p>
<ul>
<li>Fixed corrupt indexes when checking database.</li>
<li>Fixed duplicate search when sort field is not first field (thanks to Abdo).</li>
<li>Fixed error when switching to note type with fewer fields.</li>
<li>Fixed invalid utf8 in notes when checking database.</li>
<li>Fixed invisible scrollbar in night mode + browser.</li>
<li>Fixed issues with &quot;find duplicates&quot; (thanks to Abdo)</li>
<li>Fixed some issues with adding/renaming decks (thanks to Cecini).</li>
<li>Other minor fixes.</li>
</ul>
<p>For developers:</p>
<ul>
<li>Anki is now built using Bazel. This leads to more reliable builds, and reduces
the number of dependencies you need to manually install. Please see docs/ for
updated build instructions, and report any issues you encounter on the user
forums.</li>
<li>The minimum Python version has been updated to 3.8.</li>
<li>The wheels available on PyPI support both Python 3.8 and 3.9.</li>
<li>All translations have been migrated to <a href="https://translating.ankiweb.net/anki/developers.html">Fluent</a>.</li>
<li>Normal and night mode theming now uses CSS variables, making it easier to override in add-ons.</li>
<li>The congrats screen, burying/suspending, filtered deck building/emptying, browser sidebar, and card
reposition/reset have been reworked. If you were modifying them in an add-on, your add-on
may need updating. For the congratulations screen, see the new webview_did_inject_style_into_page
hook</li>
</ul>
<p>Thanks to all the people who have contributed bugfixes and code/doc updates:
Abdo, Lukkea, Akshara, Kelciour, David, Henrik, Colin, Johan, Piotr, Andreas,
Arthur, Alan, RumovZ, Cecini, Soren, Krish, ianki, Cyphar and kaczmarj, in no
particular order.</p>
<p>Thanks also to all of the people who have contributed translations for this
and previous releases: <a href="https://i18n.ankiweb.net/contributors/">https://i18n.ankiweb.net/contributors/</a></p>
<h2 id="changes-in-2135"><a class="header" href="#changes-in-2135">Changes in 2.1.35</a></h2>
<p>Released 2020-10-02, build 84dcaa86.</p>
<ul>
<li>Fix a bug in Anki 2.1.29+ that caused excessive memory and CPU usage
on long-running operations that show a progress bar, such as importing.</li>
<li>Roll back Mac and Windows builds to Qt 5.14 again,
as there are still issues with 5.15.</li>
<li>Fix display issue in graphs on alternate Mac build.</li>
<li>Fix preview not updating on multiple selection (thanks to abdo).</li>
<li>Fix old content appearing when flagging immediately
after typing.</li>
<li>Fix some handling of <code>*</code> in searches.</li>
<li>Sidebar now correctly escapes some characters (thanks to abdo).</li>
</ul>
<h2 id="changes-in-2134"><a class="header" href="#changes-in-2134">Changes in 2.1.34</a></h2>
<p>Released 2020-09-24, build 8af8f565.</p>
<ul>
<li>Fix a bug in Anki 2.1.28+ where a newly created deck config would default to
an ease of 130%. When updating, Anki will automatically change any deck
configs with an ease of 130% back to 250%, and change any cards using those
deck configs with a low ease back to an ease of 250%. Users who updated from
an older Anki version and did not add new deck configurations should not be
affected. If you have deliberately set an initial ease of 130%, please change
it to 131% or greater prior to upgrading, so that Anki leaves your settings
alone. Thanks to Aleksa for discovering the issue.</li>
<li>Update the standard builds to the latest GUI toolkit version.
Please report any improvements or regressions you notice.</li>
<li>Dropped audio plays automatically again (thanks to abdo).</li>
<li>Revert to older sound playing behaviour to work around issues
(thanks to kelciour).</li>
<li>is:due now stops at now+learn ahead limit, instead of end of day.</li>
<li>Various improvements/fixes, some thanks Aleksa &amp; Henrik.</li>
</ul>
<h2 id="changes-in-2133"><a class="header" href="#changes-in-2133">Changes in 2.1.33</a></h2>
<p>Released 2020-08-30, build 3f403040.</p>
<ul>
<li>Access More button in review screen with 'm' (thanks to ANH).</li>
<li>Audio no longer plays when dropped/pasted (thanks to ANH).</li>
<li>Fix bulk tag adding not adding tags if tag is a substring of an existing tag (thanks to Soren)</li>
<li>Fix cards not being unburied if leaving Anki open and the first action of a new day is a sync.</li>
<li>Fix drag&amp;drop into existing content (thanks to ANH).</li>
<li>Fix error when add-ons tried to access note/template in card template screen.</li>
<li>Fix next learn message in congrats screen.</li>
<li>Fix nonbreaking spaces in filenames not being handled properly.</li>
<li>Fix text in export file selector (thanks to ANH).</li>
<li>Fix timeouts in full syncs and media syncs again.</li>
</ul>
<h2 id="changes-in-2132"><a class="header" href="#changes-in-2132">Changes in 2.1.32</a></h2>
<p>Released 2020-08-25, build dee7d45d.</p>
<ul>
<li>Roll back a change in the previous update that could cause syncs to time out.</li>
<li>Fix sign up link in login screen.</li>
</ul>
<h2 id="changes-in-2131"><a class="header" href="#changes-in-2131">Changes in 2.1.31</a></h2>
<p>Released 2020-08-23, build 13476503.</p>
<ul>
<li>Show card counts in pie graph, and other minor graph tweaks.</li>
<li>Fix sync error+lost review when undoing in v2 filtered deck with scheduling off.</li>
<li>Fix crash when dragging &amp; dropping, thanks to ANH25.</li>
<li>Fix 'stale notetype' error after sync+add.</li>
<li>Close &quot;edit current&quot; when current card deleted.</li>
<li>Code improvements thanks to ANH, Arthur, Evandro, Henrik and Thomas.</li>
<li>Find&amp;Replace completion is now case sensitive.</li>
<li>Fix crash when recovering notes with missing notetype.</li>
<li>Fix duplicate detection when input text is not normalized.</li>
<li>Fix Empty Cards not ignoring BR tags.</li>
<li>Fix Find&amp;Replace window sizing.</li>
<li>Fix handling of nested legacy template directives.</li>
<li>Fix issues with bulk tag removal.</li>
<li>Fix mpv failing to play audio after it's restarted, thanks to Kelciour.</li>
<li>Fix some (rare) crashes.</li>
<li>Full syncs and media syncs now terminate more quickly when the connection breaks.</li>
<li>Improve support for getting proxies from Windows registry.</li>
<li>Remove embedded direction markers in RTL cloze deletions.</li>
<li>Strip nul characters from tags.</li>
</ul>
<h2 id="changes-in-2130"><a class="header" href="#changes-in-2130">Changes in 2.1.30</a></h2>
<p>Released 2020-08-09, build 06a69c25.</p>
<ul>
<li>Work around a failure to start on some Windows 10 May 2020 installations.</li>
<li>Fix &quot;show windows in tabs&quot; not working on standard macOS build.</li>
<li>Fix move into/out of filtered decks not syncing.</li>
<li>Add right axis to graphs.</li>
<li>Add night mode and mobile class toggles in card layout screen (thanks to ANH25).</li>
<li>Card counts graph now always shows table.</li>
<li>Catch negative review times in DB check.</li>
<li>Code improvements (thanks to Matt, phwoo, Evandro and aplaice).</li>
<li>Fix a crash in the DB check when a note type was missing.</li>
<li>Fix automatic logout not working when auth failure occurs.</li>
<li>Fix deck list and graphs not including v2 scheduler cards with rescheduling disabled.</li>
<li>Fix early reviews not appearing in review graph.</li>
<li>Fix hour graph problem in timezones west of UTC.</li>
<li>Fix negated conditonals being non-negated when renamed.</li>
<li>Fix some syncing errors that could happen until Check Database was run.</li>
<li>Fix some young cards being shown as mature in reviews graph.</li>
<li>Handle multiple same-numbered clozes in cloze-only filter.</li>
<li>Refresh tag list after clearing empty tags.</li>
<li>Other minor fixes.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-2120-to-29"><a class="header" href="#changes-in-2120-to-29">Changes in 2.1.20 to 29</a></h1>
<ul>
<li><a href="changes/2.1.20-29.html#changes-in-2129">Changes in 2.1.29</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2128">Changes in 2.1.28</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2127">Changes in 2.1.27</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2126">Changes in 2.1.26</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2125">Changes in 2.1.25</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2124">Changes in 2.1.24</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2123">Changes in 2.1.23</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2122">Changes in 2.1.22</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2121">Changes in 2.1.21</a></li>
<li><a href="changes/2.1.20-29.html#changes-in-2120">Changes in 2.1.20</a></li>
</ul>
<h2 id="changes-in-2129"><a class="header" href="#changes-in-2129">Changes in 2.1.29</a></h2>
<p>Released 2020-07-28, build bbff62bf.</p>
<ul>
<li>Add cloze-only: template filter, which can be combined with TTS to speak only the elided part.</li>
<li>Fixed AltGr key handling in standard Windows build.</li>
<li>Fix some Windows performance problems by rolling back to an older
Qt version.</li>
<li>Support the terminal command that enables dark mode on macOS again.</li>
<li>Start media sync after full sync finishes.</li>
<li>Fixed mpv taking time to start (thanks to Kelciour)</li>
<li>Code/build improvements (thanks to Evandro, Matt &amp; Arthur).</li>
<li>Use right-to-left direction in some webviews when using RTL interface language.</li>
<li>Fixed card ID and note ID being flipped in card stats.</li>
<li>Don't show an error when card contains an empty URL.</li>
<li>Various fixes for deck statistics.</li>
<li>Fixed preview not updating when editing text in the Browse screen.</li>
<li>Close gracefully on SIGTERM.</li>
<li>Other minor tweaks.</li>
</ul>
<h2 id="changes-in-2128"><a class="header" href="#changes-in-2128">Changes in 2.1.28</a></h2>
<p>Released 2020-07-20, build 7d8818f8.</p>
<p>2.1.28 is a big update with changes in a number of areas.</p>
<ul>
<li>
<p>A reworked graphs screen:</p>
<ul>
<li>Rewritten with new graphing tools for more interactivity.</li>
<li>Graphs can now be displayed for arbitrary searches.</li>
<li>Added a calendar/heatmap view.</li>
<li>If you need them for add-ons, the old graphs are currently still
accessible with a shift+click on the Stats button.</li>
</ul>
</li>
<li>
<p>Reworked syncing:</p>
<ul>
<li>Normal syncs and media syncs can operate in parallel, speeding up startup and shutdown.</li>
<li>Normal syncs no longer need to close open windows like the Browse screen, or close &amp; re-open
the collection.</li>
<li>Full syncs now show a progress bar.</li>
<li>Full syncs can now be cancelled, and both normal and full syncs cancel more quickly.</li>
</ul>
</li>
<li>
<p>Card generation changes:</p>
<ul>
<li>Card generation now supports negated conditionals, and a mix of required
and optional fields.</li>
<li>When adding/importing, if a normal note doesn't generate any cards, Anki
will now add a blank card 1 instead of refusing to add the note.</li>
<li>Please bear in mind that if you take advantage of these features, older Anki
clients may report the cards are blank, or try to clean them up when you
use the Empty Cards feature.</li>
<li>Cloze numbers over 499 are no longer supported.</li>
</ul>
</li>
<li>
<p>Card template screen:</p>
<ul>
<li>Changes are now accumulated, and can be saved or discarded when you close the screen.</li>
<li>The front, back, and styling are no longer shown at the same time. You can switch between them with ctrl+1/2/3 or cmd+1/2/3.</li>
<li>Added a search bar to search for text in the template or styling.</li>
<li>Added a dropdown to change the previewed cloze number.</li>
<li>Added a checkbox to toggle the filling of empty fields for preview.</li>
<li>You can now delete a card template even if some notes are only using that
template - they will be given a blank card 1 instead.</li>
</ul>
</li>
<li>
<p>Scheduling:</p>
<ul>
<li>The deck list no longer caps counts to 1000.</li>
<li>The overview and study screen no longer cap counts to 1000.</li>
<li>The deck list will no longer show a parent count higher than the limit
set on the parent.</li>
</ul>
</li>
<li>
<p>Empty cards screen:</p>
<ul>
<li>Notes will not be deleted by default.</li>
<li>Empty cards are grouped by note type.</li>
<li>Empty cards can be clicked on to reveal them in the browse screen.</li>
</ul>
</li>
<li>
<p>Database check:</p>
<ul>
<li>Notes with the wrong field count are now recovered instead of being deleted.</li>
<li>Notes with missing note types are now recovered instead of being deleted.</li>
<li>Notes with missing cards are now recovered instead of being deleted.</li>
</ul>
</li>
<li>
<p>Unicode normalization:</p>
<p>If you are studying rare CJK characters and wish to prevent them from being converted into
modern equivalents, the following in the debug console will stop Anki from normalizing note text.</p>
<pre><code class="language-py">mw.col.conf[&quot;normalize_note_text&quot;] = False
</code></pre>
</li>
<li>
<p>The standard Windows build has troubles with the AltGr key. This is fixed
in the 2.1.29 beta, or <a href="https://forums.ankiweb.net/t/altgr-shortcuts/67">a workaround is available</a>.</p>
</li>
<li>
<p>The standard Mac build currently does not support native dark mode. If you
previously enabled it from the terminal, please either try the 2.1.29 beta, or
undo the change with the following terminal command:</p>
<pre><code class="language-py">defaults write net.ankiweb.dtop NSRequiresAquaSystemAppearance -bool yes
</code></pre>
</li>
</ul>
<p>Other changes:</p>
<ul>
<li>Performance improvements to a number of screens.</li>
<li>Fields screen now accumulates changes, which can be saved or discarded when you close the screen.</li>
<li>Updated a few screens to show progress bars instead of hanging the UI.</li>
<li>The standard builds now use Qt 5.15.</li>
<li>Audio player on Windows has been switched back to mpv. Please report any
issues you have playing audio files/videos.</li>
<li>Fixed is:review not including relearning cards.</li>
<li>Scroll media log to bottom at start (thanks to Kelciour)</li>
<li>Update local media server (thanks to Evandro).</li>
<li>Use Qt colour picker on Linux (thanks to Andreas).</li>
<li>Add edited:x search for matching notes edited in last x days.</li>
<li>Improvements to mpv handling (thanks to Kelciour).</li>
<li>Windows build fix (thanks to Evandro).</li>
<li>Clearer error message on failed regex search.</li>
<li>Find &amp; Replace remembers input (thanks to Evandro).</li>
<li>Code improvements (thanks to BlueGreenMagick, Thomas and Andrew).</li>
<li>Fixed '&amp;' being changed in image filenames in HTML editor.</li>
<li>Fixed exports getting broken by Windows carriage returns in note fields.</li>
<li>Fixed deck deletion, and allow &quot;deleting&quot; the default deck (it comes back empty).</li>
<li>Card layout screen divider can now be adjusted (thanks to Evandro).</li>
<li>Fixed duplicate rendering in card layout screen (thanks to Evandro).</li>
<li>Fixed off-by-one in field drag&amp;drop (thanks to BlueGreenMagick)</li>
<li>Various other fixes, including contributions from BlueGreenMagick, Arthur, neitrinoweb
and kenden.</li>
</ul>
<h2 id="changes-in-2127"><a class="header" href="#changes-in-2127">Changes in 2.1.27</a></h2>
<p>This number was reserved for a bugfix release.</p>
<h2 id="changes-in-2126"><a class="header" href="#changes-in-2126">Changes in 2.1.26</a></h2>
<p>Released 2020-05-09, build 70784154.</p>
<ul>
<li>Fixed saving of searches in the browse screen.</li>
<li>Fixed card layout screen failing to open in the alternate Anki build.</li>
<li>Fixed .log files appearing when exporting.</li>
<li>Fixed an error appearing when undoing V2 filtered decks with scheduling disabled.</li>
<li>Fixed duplicate search when text contains formatting.</li>
<li>Improvements to the PyPI packages (thanks to Evandro).</li>
<li>Tweak the handling of changed note types in the add screen (thanks to Arthur).</li>
<li>Tolerate decks with missing modification time from third party software.</li>
<li>Support SOCKS proxies in the non-media sync.</li>
</ul>
<h2 id="changes-in-2125"><a class="header" href="#changes-in-2125">Changes in 2.1.25</a></h2>
<p>Released 2020-05-01, build 898801eb (PyPi 6046bbc7)</p>
<ul>
<li>Fix a change to deck configurations that was breaking AnkiDroid.</li>
<li>Fix deck configurations not deleting.</li>
<li>Fix angle brackets inside cloze+MathJax not working properly.</li>
<li>The DB check fixes an AnkiMobile bug where tags were not searchable.</li>
<li>Revert to an earlier macOS toolchain to work around recordings not working.</li>
<li>The media check no longer fails when files with very long filenames are in the folder.</li>
<li>More gracefully handle case where deck conf is missing.</li>
<li>Don't throw an error when cards have an invalid due number.</li>
<li>{{type::Field}} now marks the card as non-empty if Field is non-empty.</li>
<li>Tweak tab width in card layout screen (thanks to BlueGreenMagick).</li>
<li>Build fixes (thanks to Evandro).</li>
</ul>
<h2 id="changes-in-2124"><a class="header" href="#changes-in-2124">Changes in 2.1.24</a></h2>
<p>Released 2020-04-28, build 359b9f5c.</p>
<p>Searching:</p>
<ul>
<li>You can use <code>w:something</code> to search on word boundaries, eg:
<ul>
<li><code>w:dog</code><br />
search for &quot;dog&quot; on a word boundary - will match &quot;dog&quot;, but not &quot;doggy&quot;
or &quot;underdog&quot;.</li>
<li><code>w:dog*</code><br />
will match &quot;dog&quot; and &quot;doggy&quot;, but not &quot;underdog&quot;.</li>
<li><code>w:*dog</code><br />
will match &quot;dog&quot; and &quot;underdog&quot;, but not &quot;doggy&quot;.</li>
</ul>
</li>
<li>You can now use <code>re:something</code> to search via regular expression, eg:
<ul>
<li><code>&quot;re:(some|another).*thing&quot;</code><br />
find notes that have &quot;some&quot; or &quot;another&quot; on them, followed by 0 or more characters, and then &quot;thing&quot;</li>
<li><code>re:\d{3}</code><br />
find notes that have 3 digits in a row</li>
<li>When searching by regex, unicode case folding is used, so searching for <code>re:Ã¼ber</code> will
show a card that has &quot;Ãœber&quot; on it.</li>
</ul>
</li>
<li><code>nc:something</code> (short for &quot;no combining (characters)&quot;) can be used to search while
ignoring accents, eg <code>nc:uber</code> will match both &quot;Ã¼ber&quot; and &quot;Ãœber&quot;. This behaves the same way as the &quot;Ignore Accents&quot; add-on, but is about 16x faster.</li>
<li>You can now sort on the deck, card template, note type and tags columns.</li>
<li>You can now use wildcards when limiting the search to a field, eg <code>field*:something</code>.</li>
<li>You can now use wildcards when searching for a card template or note type by name.</li>
<li><code>rated:x</code> searches are now capped to a year instead of a month.</li>
<li>You can now escaped double-quotes in a search - eg <code>&quot;foo\&quot;bar&quot;</code></li>
<li>Single-quote searches are no longer supported.</li>
<li>Because the searching code has been rewritten, add-ons that modify the search
code will need to be updated to support 2.1.24. It is no longer possible to
override the Finder class - add-ons will need to use the new hooks in the
browser screen to either rewrite the search text, or perform their own lookups
instead. The Advanced Browser add-on has already been updated, and can be used
as an example of how to accomplish things in 2.1.24.</li>
<li>Non-wildcard searches now do full unicode case folding (eg 'tag:masse' matches 'MaÃŸe').</li>
<li>Wildcard searches do simple unicode case folding.</li>
<li>The tag list in the Browse screen now uses unicode case folding.</li>
</ul>
<p>macOS dark mode handling:</p>
<ul>
<li>
<p>Anki now solely relies on the night mode setting in the preferences to decide
whether to show in light or dark mode. Some users wanted to run Anki in light
mode while keeping the rest of their system dark, and there were various
display problems when dark mode was changed after Anki started that couldn't
be easily worked around.</p>
</li>
<li>
<p>Users who only use dark mode, and preferred the native look of widgets in dark
mode, can achieve the previous appearance by running the following command in
the terminal:</p>
<p>:warning: This will only work if your system is permanently in dark mode!
If you switch between dark and light mode, the interface will render incorrectly.</p>
<pre><code class="language-shell">defaults write net.ankiweb.dtop NSRequiresAquaSystemAppearance -bool no
</code></pre>
<p>And the following in the debug console:</p>
<pre><code class="language-py">mw.pm.meta[&quot;dark_mode_widgets&quot;] = True
</code></pre>
</li>
</ul>
<p>Database changes (mainly of interest to add-on developers):</p>
<ul>
<li>Anki now uses Rust's sqlite libraries instead of Python's.</li>
<li>The 'db' object on the collection retains most of the same API as before, minimizing the amount of immediate code changes that are required.</li>
<li>Custom sql functions are no longer supported, and named DB arguments (eg &quot;where id = :id&quot;) are deprecated.</li>
<li>The old database code remains in db.py, and add-ons can continue to use it for accessing
their own databases.</li>
<li>The database is now behind a mutex, and can be safely accessed from a background thread.</li>
<li>Various screens like the database check have been updated to run on a background thread,
so they no longer lock up the UI while they're running.</li>
<li>The database progress handler has been removed. Anki previous had sqlite call back into
Python periodically during long-running DB operations so it could drain the UI queue,
but this would vary in choppyness depending on the type of DB operation being performed,
and it was the cause of some crashes in the past. Add-ons that perform long-running operations
should instead use mw.taskman.run_in_background() or their own threading solution moving forward.</li>
</ul>
<p>Other changes:</p>
<ul>
<li>A tweak which should fix some broken add-ons from preventing the collection from being loaded.</li>
<li>Add socks support to media sync.</li>
<li>Allow dragging fields to change their position (thanks to BlueGreenMagick).</li>
<li>Allow selecting add-on config help text (thanks to ijgnd).</li>
<li>Allow the type answer arrow to be styled (thanks to Evandro).</li>
<li>Anki will now wait for a media sync to complete or be aborted before closing the collection.</li>
<li>Build improvements (thanks to Evandro).</li>
<li>Changed the way cloze deletions in RTL fields are handled, which should address some corner cases.</li>
<li>Clean up the previewing code (thanks to Arthur). Add-ons that modify the preview screen will need updating.</li>
<li>Don't force a full sync when DB check finds cards with a high due number.</li>
<li>Don't show a popup when a network error occurs while syncing media.</li>
<li>Fixed a case where decks could be sorted incorrectly (thanks to Arthur).</li>
<li>Fixed a useless log file being created when exporting.</li>
<li>Fixed add-ons with multiple branches not updating properly.</li>
<li>Fixed an error that could occur when performing an operation in the browse screen then immediately closing it.</li>
<li>Fixed Anki closing after a full sync on collection load.</li>
<li>Fixed current card sometimes not being centered when searching.</li>
<li>Fixed deck_browser_did_render hook.</li>
<li>Fixed editor buttons not being highlighted (thanks to Simone).</li>
<li>Fixed interface getting stuck when a corrupt collection was encountered.</li>
<li>Fixed media sync waiting forever when connection dropped.</li>
<li>Fixed progress dialogs failing to appear in a timely manner.</li>
<li>Fixed tag searches in custom study (thanks to zjosua).</li>
<li>Fixed the collection_did_load add-on hook.</li>
<li>Fixed the wrong language shown in the preferences screen for some languages.</li>
<li>GitHub now checks Windows and Mac builds as well (thanks to Evandro).</li>
<li>Handle renamed cloze fields when previewing (thanks to BlueGreenMagick).</li>
<li>Ignore .DS_Store files in the media trash folder.</li>
<li>Improved invalid HTML/JS error messages (thanks to Evandro).</li>
<li>Improved the handling of deck deletions (thanks to Arthur).</li>
<li>Improvements to debug console (thanks to BlueGreenMagick).</li>
<li>Left-align tags in the browser.</li>
<li>Media syncs no longer take time to abort.</li>
<li>More hooks (thanks to Arthur).</li>
<li>Moved the scheduling options in the preferences to a separate tab, so options fit on the screen even on devices with small screens.</li>
<li>Prepare for uploading releases to PyPI (thanks to Evandro).</li>
<li>The media check will now fix file references in fields that broke because a filename was shortened as part of a sync.</li>
<li>Updated config handling. While there should be no immediate breakages, if you're an add-on author and
store lists or dicts in Anki's config, please see 676f4e74a.</li>
</ul>
<h2 id="changes-in-2123"><a class="header" href="#changes-in-2123">Changes in 2.1.23</a></h2>
<p>Released 2020-03-19, build de9543ff.</p>
<p>A macOS-only build that fixes a problem syncing media files
with non-Latin filenames added by previous Anki versions on macOS.</p>
<p>Please see 2.1.22 below for the bulk of the changes.</p>
<h2 id="changes-in-2122"><a class="header" href="#changes-in-2122">Changes in 2.1.22</a></h2>
<p>Released 2020-03-18, build 0ecc189a.</p>
<p>Media syncing improvements:</p>
<ul>
<li>Media syncing now happens in the background, so you can continue using
Anki while the media sync completes.</li>
<li>Aside from syncing at open and close, Anki will sync any media changes
every 15-20 minutes.</li>
<li>You can click on the sync button while the spinner is active to monitor
progress.</li>
<li>Long filenames and problematic characters should be handled smoothly now,
instead of causing syncing errors.</li>
<li>Anki should no longer sometimes forget to download files when a media
sync fails due to network errors.</li>
<li>When media files are added within Anki, Anki now marks them
in the database immediately, which can make things faster for people with
slower disks if they are not modifying the media folder externally.</li>
</ul>
<p>Media check improvements:</p>
<ul>
<li>The Check Media function now shows progress, and can be interrupted.</li>
<li>There is now a separate button to generate missing LaTeX.</li>
<li>If LaTeX fails to build, the problem card will be revealed in the browse
screen.</li>
<li>When Anki finds files that are too long or would cause errors on some
operating systems, it will automatically rename them and update your notes
to point to the new filename.</li>
</ul>
<p>Both media sync and the media check now place deleted files in a media.trash
folder inside your profile, instead of placing the files in the system trash.
You can use the Check Media function to either empty the trash, or restore
the deleted files back to your media folder.</p>
<p>Other changes:</p>
<ul>
<li>You can now export .apkg files with the V2 scheduler enabled.</li>
<li>Add &quot;New #&quot; prefix to the due column for new cards.</li>
<li>Fixed audio getting stuck on Windows.</li>
<li>Clear the audio queue when moving between cards with autoplay off.</li>
<li>Fixed play icons not appearing in browser preview when autoplay off.</li>
<li>Show next learning card due time, and count for today.</li>
<li>Restored grey styling of zeros in the deck list that got lost in the night mode changes.</li>
<li>Improvements to the readability of the scheduling code (thanks to Arthur)</li>
<li>Add-on hook improvements, thanks to Glutanimate and Arthur.</li>
<li>Fixed fields containing a filename with non-Latin text from being corrupted when editing HTML (thanks to Evandro).</li>
<li>Support for validating add-on config schemas (thanks to Arthur).</li>
<li>Removed the 'too many decks' message in the deck list screen.</li>
<li>Fix for issue playing audio from flash drive.</li>
<li>Fixed Anki getting stuck when importing an invalid file.</li>
<li>More type hints in the code (thanks to Alan).</li>
<li>Improvements to the build process and building on Windows (thanks to Evandro).</li>
<li>Support '/' separator in add-on web paths on Windows (thanks to BlueGreenMagick)</li>
<li>Fix tags that are in the wrong encoding as part of the DB check.</li>
<li>Hide the default deck in more cases (thanks to Arthur).</li>
<li>Updates to the translation infrastructure, including tweaks to the way
the answer buttons and the review history screen show intervals.</li>
</ul>
<h2 id="changes-in-2121"><a class="header" href="#changes-in-2121">Changes in 2.1.21</a></h2>
<p>Released 2020-03-09, build f1734a47.</p>
<ul>
<li>Fixed error messages when playing audio.</li>
<li>Fixed legacy add-on filters not working (reading generation in Japanese Support, etc).</li>
<li>The alternate Mac build works properly when macOS is in dark mode now,
and can be used if you prefer light Anki in macOS dark mode.</li>
<li>Prevent UI scale from being decreased below 100%, which caused display problems.</li>
<li>Fixed Anki failing to start on some Windows 7 machines that were missing TTS support.</li>
<li>Display a more useful message when mpv/mplayer not installed.</li>
<li>Don't allow exporting into Anki folder.</li>
<li>Fixed display of AnkiMobile drawings in night mode.</li>
<li>Fixed interrupting of current audio when autoplay is turned off.</li>
<li>Night mode defaults to dark grey instead of black card background.</li>
<li>Fixed {{Deck}} showing filtered deck instead of original deck.</li>
<li>Fixed an error that could occur with very small learning steps.</li>
<li>Fixed a negative version number being shown when add-ons incompatible.</li>
<li>Fixed some invalid HTML in the review screen (thanks to BlueGreenMagic)</li>
<li>Added back missing fcntl module.</li>
</ul>
<h2 id="changes-in-2120"><a class="header" href="#changes-in-2120">Changes in 2.1.20</a></h2>
<p>Released 2020-02-14, build 47a1bf8b.</p>
<p>Template changes:</p>
<p>The way Anki combines your card templates and fields has been updated.
Many users will not notice a difference, but if you encounter error
messages inside the review screen and opening and closing the Cards
screen from the editing area does not resolve the issue, please see
<a href="https://anki.tenderapp.com/kb/problems/card-template-has-a-problem">this support
page</a>.</p>
<p>Add-ons that alter the way cards are shown may need to be
updated:</p>
<pre><code>The card template rendering process in Anki 2.1.20 has changed significantly under the hood, and most of the code that was in the anki/templates folder has gone away. Add-ons that were relying on hooks to modify the card rendering should continue to function, but add-ons that were using or monkey patching methods in the templates module will break, as those methods no longer exist.

I have looked through the add-ons on AnkiWeb that modify the card template, and believe most of them should be able to accomplish what they were doing before by using the new card_did_render and/or field_filter hooks. Examples of how each of them can be used are available here:

https://github.com/ankitects/anki-addons/blob/master/demos/

For add-ons that were using the furigana/hint field modifiers, they are available for copying in the template_legacy.py file.

If the hooks are insufficient for what your add-on is doing, please let me know within the next few weeks. If you're an end user and an add-on you use has broken, please let the add-on author know of this post.

In terms of user-visible changes:

The limit of 100 replacements on a template has been dropped.
The new approach allow add-ons to add fields without 'unknown field' messages appearing on mobile devices (once they've been updated)
Fields with a ':' character are no longer allowed. If you have a ':' in your fields, you can open and close the Cards screen to automatically remove the colon.
Templates that reference a field that doesn't exist will now only show an error, instead of partially rendering.
{{field}} references are ignored inside fields, so there is no risk of LaTeX/MathJax being interpreted as a field reference.
The &lt;% %&gt; alternate syntax is deprecated, as it is no longer necessary due to the above change.
Clearer errors when the user forgets to close a {{field}} reference, or mismatches open and close conditionals.
</code></pre>
<p>Audio changes:</p>
<ul>
<li>
<p>Text to speech is now <a href="https://docs.ankiweb.net/templates/fields.html#text-to-speech">supported in card
templates</a>.</p>
</li>
<li>
<p>Audio buttons are now shown on the card, and can be turned off in
the preferences. They will show for both regular audio and text to
speech.</p>
</li>
<li>
<p>You can <a href="https://docs.ankiweb.net/templates/styling.html#audio-replay-buttons">customize the size and
colour</a>.</p>
</li>
<li>
<p>Added shortcut keys in the review screen to pause and jump
forward/backward 5 seconds.</p>
</li>
<li>
<p>Anki now starts a new copy of mplayer for each audio file on
Windows, which avoids the need to create temporary files.</p>
</li>
<li>
<p>Added an option in the preferences to not interrupt the currently
playing audio when answering.</p>
</li>
<li>
<p>Fix multiple spaces in filenames from getting truncated when pasting
sound files.</p>
</li>
</ul>
<p>Night mode:</p>
<ul>
<li>
<p>The night mode option in the preferences screen now turns the
interface dark as well.</p>
</li>
<li>
<p>On macOS, when the system is in dark mode, Anki will switch to night
mode automatically.</p>
</li>
<li>
<p>Invert LaTeX in night mode (thanks to zjosua).</p>
</li>
<li>
<p>Some of the colours in areas like the graphs could be improved -
pull requests with included screenshots of the changes would be
appreciated.</p>
</li>
</ul>
<p>Add-on changes:</p>
<ul>
<li>
<p>Anki will now check for add-on updates automatically once a day.</p>
</li>
<li>
<p>Disabled add-ons are now included in the check as well.</p>
</li>
<li>
<p>Add-on authors can specify the minimum and maximum Anki version they
support, and add-ons will be automatically disabled when running on
an unsupported Anki version.</p>
</li>
<li>
<p>Add-on authors can now upload different add-on versions for
different Anki versions, and Anki will download the correct one.</p>
</li>
<li>
<p>A new hook system for add-ons:</p>
</li>
</ul>
<pre><code>Anki 2.1.20 introduces a new hook system that allows for better code completion and type checking than the old system. For a short explanation and link to some sample add-ons, please see https://apps.ankiweb.net/docs/addons.html#new-hooks

Add-ons using the old hooks should continue to work, as the new hooks will automatically call the old hooks in most cases, and a few runHook/runFilter calls have been left in the codebase in the places where the new hooks differ significantly from the old ones.

There are a bunch of hooks that previously were called with no arguments, such as when a new deck is created. The new hooks will tend to pass the newly created item into the callback, but will not do so for the legacy hooks, to avoid breaking old code.

If anyone has feedback on the naming or the arguments of the new hooks, please let me know during the beta testing period, so they can be changed prior to add-on authors relying on them.

To go along with these changes, the policy on adding new hooks has also changed. In the past, Anki's add-on documentation suggested hooks were best left for code paths that multiple add-ons wanted to extend, but this resulted in an over-reliance on monkey patching, and has made things fragile. The add-on documentation has been updated to encourage add-on authors to submit pull requests for any hooks they need, and the hope is that the bulk of add-ons can move away from monkey patching in the future.
</code></pre>
<ul>
<li>For add-on authors, some more examples using the new hook system are
available on the following page, including ported versions of the
clickable tags and additional card fields add-ons:
<a href="https://github.com/ankitects/anki-addons/tree/master/demos">https://github.com/ankitects/anki-addons/tree/master/demos</a></li>
</ul>
<p>Other changes:</p>
<ul>
<li>
<p>Added the ability to export selected notes from the Browse screen
(thanks to Arthur).</p>
</li>
<li>
<p>Updated to a newer toolkit.</p>
</li>
<li>
<p>Emptying a filtered deck in the V2 scheduler no longer unsuspends
suspended cards inside it.</p>
</li>
<li>
<p>Fix incorrect delay being logged when Hard is used on the first
learning step in the V2 scheduler.</p>
</li>
<li>
<p>The editor no longer modifies percent-escaped text outside of image
tags.</p>
</li>
<li>
<p>Fix an extra linebreak being left in a field when an image is
attached to an empty field.</p>
</li>
<li>
<p>Tweaks to the 'tag updated notes' feature (thanks to Erez)</p>
</li>
<li>
<p>Fix cards being sorted in wrong order when added after the note was
created (thanks to Arthur)</p>
</li>
<li>
<p>Disabled elastic scrolling in webviews to work around a Qt bug.</p>
</li>
<li>
<p>Donâ€™t filter em/strong tags when pasting.</p>
</li>
<li>
<p>Fix error when double-clicking the open profile button.</p>
</li>
<li>
<p>Constrain image width in editor to the field width.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-2110-to-19"><a class="header" href="#changes-in-2110-to-19">Changes in 2.1.10 to 19</a></h1>
<ul>
<li><a href="changes/2.1.10-19.html#changes-in-2119">Changes in 2.1.19</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2118">Changes in 2.1.18</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2117">Changes in 2.1.17</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2116">Changes in 2.1.16</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2115">Changes in 2.1.15</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2114">Changes in 2.1.14</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2113">Changes in 2.1.13</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2112">Changes in 2.1.12</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2111">Changes in 2.1.11</a></li>
<li><a href="changes/2.1.10-19.html#changes-in-2110">Changes in 2.1.10</a></li>
</ul>
<h2 id="changes-in-2119"><a class="header" href="#changes-in-2119">Changes in 2.1.19</a></h2>
<p>Released 2020-01-16, build 3c8690ae.</p>
<ul>
<li>
<p>Fix formatting and images getting lost when creating cloze
deletions.</p>
</li>
<li>
<p>Added an option to the preferences screen to strip formatting by
default.</p>
</li>
<li>
<p>Fix the preview button shortcut key not working.</p>
</li>
</ul>
<h2 id="changes-in-2118"><a class="header" href="#changes-in-2118">Changes in 2.1.18</a></h2>
<p>Released 2020-01-14, build fb9d59fe.</p>
<ul>
<li>
<p>Fixed Anki failing to start for some users updating from Anki 2.0.</p>
</li>
<li>
<p>Fixed the alternate Windows build failing to start on Windows 8.</p>
</li>
</ul>
<h2 id="changes-in-2117"><a class="header" href="#changes-in-2117">Changes in 2.1.17</a></h2>
<p>Released 2020-01-11, build c69ccb50.</p>
<p>Linux version repackaged on 2020-01-12 to fix a 'make install' issue.</p>
<ul>
<li>
<p>Improved the performance of the browse screenâ€™s sidebar for users
with many decks/tags.</p>
</li>
<li>
<p>Add-ons that modify the sidebar will break when you update, and will
need to be updated by the add-on author.</p>
</li>
<li>
<p>Add-ons that alter the audio handling may need to be updated, as
code has moved from anki.sound to aqt.sound.</p>
</li>
<li>
<p>Changing large note types is significantly faster.</p>
</li>
<li>
<p>Added an option in the preferences screen to adjust the user
interface size.</p>
</li>
<li>
<p>You can now double-click on an .ankiaddon file to install it (thanks
to Glutanimate).</p>
</li>
<li>
<p>Updated GUI libraries for the standard installs and the alternate
Windows install.</p>
</li>
<li>
<p>The minimum Python version is now 3.7, and the packaged versions
ship with Python 3.8.</p>
</li>
<li>
<p>The alternate Linux build has been dropped - you will need to be on
a Linux distro from 2016+ with systemd support to use the packaged
version.</p>
</li>
<li>
<p>Source tarballs are available from the releases tab of the GitHub
repo.</p>
</li>
<li>
<p>Added an option to tag updated notes when importing (thanks to
Erez).</p>
</li>
<li>
<p>Automatically remove ':' from field names when opening the card
templates screen, as it conflicts with the template syntax.</p>
</li>
<li>
<p>Fix a bug in the handling of MathJax+Cloze (thanks to Michal).</p>
</li>
<li>
<p>Fixed a regression in the way duplicate deck names were handled.</p>
</li>
<li>
<p>Remove help button from some Window titles.</p>
</li>
</ul>
<h2 id="changes-in-2116"><a class="header" href="#changes-in-2116">Changes in 2.1.16</a></h2>
<p>Released 2019-12-12, build 4bc33e2f.</p>
<p>Due to some minor issues that were found, the website was not updated to
point to this release.</p>
<ul>
<li>
<p>Pasting now includes formatting by default.</p>
</li>
<li>
<p>Preserve foreground/background color when pasting.</p>
</li>
<li>
<p>Preserve bold/italic/underline when pasting from Google Docs.</p>
</li>
<li>
<p>When pasting with the shift key, bold/italics/underline is also
stripped.</p>
</li>
<li>
<p>Ensure learning cards in filtered decks with 'order due' show in
template order.</p>
</li>
<li>
<p>Remove the 'experimental' label from the new scheduler.</p>
</li>
<li>
<p>You can now import and export decks with scheduling enabled in the
new scheduler.</p>
</li>
<li>
<p>Hide empty Default deck in deck picker (thanks to Arthur).</p>
</li>
<li>
<p>Add an extra day to the interval when using Easy on a relearning
card.</p>
</li>
<li>
<p>Preserve surrounding styling when making cloze deletions.</p>
</li>
<li>
<p>Draw preview screen more quickly.</p>
</li>
<li>
<p>Fix race condition in preview screen (thanks to HÃ¥kon).</p>
</li>
<li>
<p>Use --exact with dvsvgm to prevent truncated subscript/superscript
in LaTeX.</p>
</li>
<li>
<p>Newly created cards could be given the wrong due number (thanks to
Arthur).</p>
</li>
<li>
<p>Sticky fields were ignored when closing the add card window (thanks
to Arthur).</p>
</li>
<li>
<p>Adding a note type forced a full sync (thanks to Arthur).</p>
</li>
<li>
<p>Remove shortcut keys from translations (thanks to Arthur).</p>
</li>
<li>
<p>Documentation changes for translators (thanks to Arthur).</p>
</li>
<li>
<p>Case not being preserved when changing a deckâ€™s parent (thanks to
Arthur).</p>
</li>
<li>
<p>Hide default deck in other screens when empty (thanks to Arthur).</p>
</li>
<li>
<p>Fix qtwebengineprocesses not being cleaned up when stats window
closed.</p>
</li>
<li>
<p>Allow smaller window when editing current card.</p>
</li>
<li>
<p>Support pasting multiple URLs at once.</p>
</li>
<li>
<p>Add ability to force software rendering on old Macs (thanks to Mike)</p>
</li>
<li>
<p>A fix for case insensitive field name handling in find&amp;replace
(thanks to lovac42)</p>
</li>
<li>
<p>Fix non-integer intervals being imported from Mnemosyne (thanks to
Blauelf)</p>
</li>
<li>
<p>Clear undo queue when changing scheduler (thanks to lovac42)</p>
</li>
<li>
<p>Default to not closing add window (thanks to Aidan)</p>
</li>
<li>
<p>Sort new cards separately when sorting by ease (thanks to Arthur)</p>
</li>
<li>
<p>Fix a bug in the V2 scheduler.</p>
</li>
<li>
<p>Properly handle backslashes in the replacement section of
Find&amp;Replace.</p>
</li>
<li>
<p>Various small fixes.</p>
</li>
</ul>
<h2 id="changes-in-2115"><a class="header" href="#changes-in-2115">Changes in 2.1.15</a></h2>
<p>Released 2019-08-22, build 442df9d6.</p>
<ul>
<li>
<p>The V2 scheduler now fully randomizes review cards due on a given
day.</p>
</li>
<li>
<p>Fix add-ons errors on Windows when profile path was short.</p>
</li>
<li>
<p>Fix flag changes in Browse screen not syncing.</p>
</li>
<li>
<p>Cleanup recording wav file when recording canceled.</p>
</li>
<li>
<p>Fix the window icon on Wayland (thanks to Wilco).</p>
</li>
<li>
<p>Add a progress bar to media deletion.</p>
</li>
<li>
<p>Other minor changes.</p>
</li>
</ul>
<h2 id="changes-in-2114"><a class="header" href="#changes-in-2114">Changes in 2.1.14</a></h2>
<p>Released 2019-06-27, build 7b93e985.</p>
<ul>
<li>
<p>Fix a bug in the V2 scheduler that would cause partially learnt
cards removed from filtered decks to revert to an earlier state.</p>
</li>
<li>
<p>Fix a bug in the handling of relearning cards when switching back to
the V1 scheduler.</p>
</li>
<li>
<p>Fix lost space when pasting indented text.</p>
</li>
<li>
<p>Limit image height relative to window height, not document height.</p>
</li>
<li>
<p>Fix deck list being re-rendered unnecessarily.</p>
</li>
<li>
<p>Remove the 'unable to connect to local port' message.</p>
</li>
</ul>
<h2 id="changes-in-2113"><a class="header" href="#changes-in-2113">Changes in 2.1.13</a></h2>
<p>Released 2019-05-20, build 3ba55990.</p>
<ul>
<li>
<p>Fix formatting getting lost when copying&amp;pasting between fields on
macOS.</p>
</li>
<li>
<p>Fix some issues that cause the main window to get stuck.</p>
</li>
<li>
<p>Fix an empty deck list sometimes appearing when restoring from a
backup.</p>
</li>
<li>
<p>Fix Anki hanging after an error occurs during startup.</p>
</li>
<li>
<p>Fix error caused by profile with trailing space on Windows.</p>
</li>
<li>
<p>Fix error message when syncing with an unconfirmed email address.</p>
</li>
<li>
<p>Use jsonschema for add-on manifests (thanks to Erez).</p>
</li>
<li>
<p>Warn in DB check when high due numbers are encountered.</p>
</li>
<li>
<p>Improve error messages on full disk and failed add-on deletion.</p>
</li>
<li>
<p>Fix relearning cards being given learning step count in V2
scheduler.</p>
</li>
<li>
<p>Fix preview window failing to appear when 'show both sides' enabled.</p>
</li>
<li>
<p>Removing trailing BR tag when pasting into an empty field.</p>
</li>
<li>
<p>Donâ€™t throw an error when non-Latin text in the Javascript console
canâ€™t be shown.</p>
</li>
<li>
<p>Double click on add-ons to edit their configuration (thanks to
lovac42).</p>
</li>
<li>
<p>Fix the window icon in a few screens (thanks to John).</p>
</li>
<li>
<p>Donâ€™t highlight the deck selection button in the add screen on
Windows.</p>
</li>
<li>
<p>Improve the default 'type in the answer' note type.</p>
</li>
</ul>
<h2 id="changes-in-2112"><a class="header" href="#changes-in-2112">Changes in 2.1.12</a></h2>
<p>Released 2019-04-23, build eef86bf3.</p>
<ul>
<li>
<p>Fix an issue that could prevent profile renaming/deletion on
Windows.</p>
</li>
<li>
<p>Fix fields appearing under editor buttons.</p>
</li>
<li>
<p>Fix memory leak in card layout screen.</p>
</li>
<li>
<p>Fix some issues with previewing in the Browse screen.</p>
</li>
<li>
<p>Fix card counts not updating when a review is undone.</p>
</li>
<li>
<p>Fix an error that could occur on startup on some Windows installs.</p>
</li>
<li>
<p>The Mac build now uses the new hardened runtime on Mojave.</p>
</li>
<li>
<p>Change focus outline colour on Windows.</p>
</li>
<li>
<p>Fix an error caused by missing note types.</p>
</li>
<li>
<p>A possible workaround for the audio player getting stuck on Macs.</p>
</li>
<li>
<p>Display the installed version in the Windows uninstall screen.</p>
</li>
<li>
<p>Fix an issue checking for add-on updates (thanks to Glutanimate).</p>
</li>
<li>
<p>Disable add-on config button when not appropriate (thanks to
Glutanimate).</p>
</li>
<li>
<p>Tweaks to the 'deck age' graph binning (thanks to Jian).</p>
</li>
<li>
<p>Add-ons hosted on AnkiWeb can now define conflicts in the manifest
file.</p>
</li>
<li>
<p>Switch to mplayer on the alternate OS X build, as mpv was not
working on some older machines.</p>
</li>
<li>
<p>Make sure mpv doesnâ€™t attempt to load scripts from default location.</p>
</li>
<li>
<p>Other minor fixes.</p>
</li>
</ul>
<h2 id="changes-in-2111"><a class="header" href="#changes-in-2111">Changes in 2.1.11</a></h2>
<p>Released 2019-03-11, build 3cf770c7.</p>
<ul>
<li>
<p>Change Undo shortcut back to Ctrl+Alt+Z/Cmd+Opt+Z in Browse screen,
to prevent accidentally undoing non-text changes when editing
fields.</p>
</li>
<li>
<p>Revert a previous card template optimization that could cause an
error.</p>
</li>
<li>
<p>Suppress a spurious error message that could occur when editing.</p>
</li>
</ul>
<h2 id="changes-in-2110"><a class="header" href="#changes-in-2110">Changes in 2.1.10</a></h2>
<p>Released 2019-03-07, build 22d6feed.</p>
<ul>
<li>
<p>Add option to strip html in export.</p>
</li>
<li>
<p>Avoid nbsp for single spaces when pasting text.</p>
</li>
<li>
<p>Fix preview screen flashing when moving between cards.</p>
</li>
<li>
<p>Improvements to the add-ons screen (thanks to Glutanimate).</p>
</li>
<li>
<p>Support .ankiaddon bundles (thanks to Glutanimate).</p>
</li>
<li>
<p>Improve subpixel antialiasing on some machines (thanks to
Glutanimate).</p>
</li>
<li>
<p>Improve Japanese interface font on Windows 10, and make it possible
for translators to change the font for other languages that need it
as well.</p>
</li>
<li>
<p>Fix inability to start if problem occurs on first run.</p>
</li>
<li>
<p>Allow decreasing daily limits in custom study.</p>
</li>
<li>
<p>Add a button to copy debug info to about screen (thanks to
Glutanimate).</p>
</li>
<li>
<p>Fix problem running from source on Windows (thanks to dlon).</p>
</li>
<li>
<p>Allow add-ons to serve files from mediasrv (thanks to Glutanimate).</p>
</li>
<li>
<p>More user-friendly error messages for some network errors.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-210-to-219"><a class="header" href="#changes-in-210-to-219">Changes in 2.1.0 to 2.1.9</a></h1>
<ul>
<li><a href="changes/2.1.0-9.html#changes-in-219">Changes in 2.1.9</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-218">Changes in 2.1.8</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-217">Changes in 2.1.7</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-216">Changes in 2.1.6</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-215">Changes in 2.1.5</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-214">Changes in 2.1.4</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-213">Changes in 2.1.3</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-212">Changes in 2.1.2</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-211">Changes in 2.1.1</a></li>
<li><a href="changes/2.1.0-9.html#changes-in-210">Changes in 2.1.0</a></li>
</ul>
<h2 id="changes-in-219"><a class="header" href="#changes-in-219">Changes in 2.1.9</a></h2>
<p>Released 2019-02-20, build ae67c976.</p>
<ul>
<li>
<p>Update standard build to latest toolkit version.</p>
</li>
<li>
<p>Hardware acceleration defaults to off again on Windows/Linux, due to
the issues it was causing some users. If you were not experiencing
any issues, turning hardware acceleration back on in the preferences
screen is recommended.</p>
</li>
<li>
<p>Various statistics fixes for the V2 scheduler, including an
automatic remapping of button 2/3 in the review history when moving
back and forth between scheduler versions so the &quot;answer buttons&quot;
graph displays correctly.</p>
</li>
<li>
<p>Fix BR tags being included in empty fields (thanks to David and
zjosua)</p>
</li>
<li>
<p>Optimize card template repositioning (thanks to Arthur)</p>
</li>
<li>
<p>Fix a crash when copying/cutting with an empty selection (thanks to
David)</p>
</li>
<li>
<p>Avoid screen flash when undoing reviews.</p>
</li>
<li>
<p>Make sure info/warning dialogs appear on top.</p>
</li>
<li>
<p>Fixed an issue with just-typed text not being saved when using the
mouse to save/add a card.</p>
</li>
<li>
<p>Added support for \{{CardFlag}}, which is either empty, or in the
format &quot;flagN&quot; where N is 1-4.</p>
</li>
<li>
<p>Fix bulk flag changes in Browse screen not syncing.</p>
</li>
<li>
<p>Fix advanced menu in editor not showing shortcut keys.</p>
</li>
<li>
<p>When UI fails to load after resuming computer from sync, show a
tooltip and automatically refresh.</p>
</li>
<li>
<p>Clean up old mplayer instances after a crash so that profile
renaming works.</p>
</li>
<li>
<p>Fix add-on list not refreshing when toggling enabled in latest
toolkit.</p>
</li>
<li>
<p>Fix cursor jumping on first click in &quot;Edit Current&quot; area on Windows.</p>
</li>
<li>
<p>Preserve whitespace when pasting plain text.</p>
</li>
<li>
<p>Prevent errors caused by a timer firing after collection is
unloaded.</p>
</li>
<li>
<p>Ensure a full sync is forced when restoring from a backup.</p>
</li>
<li>
<p>Ensure full window is on screen when displaying windows on a changed
screen layout.</p>
</li>
<li>
<p>Improvements to the add-ons, debug console, and error screens
(thanks to Glutanimate)</p>
</li>
<li>
<p>Ensure \{{Deck}} shows the correct deck when adding (thanks to
Arthur)</p>
</li>
<li>
<p>Ensure windows donâ€™t get shown off-screen.</p>
</li>
<li>
<p>Remember add-on window size and position.</p>
</li>
</ul>
<h2 id="changes-in-218"><a class="header" href="#changes-in-218">Changes in 2.1.8</a></h2>
<p>Released 2019-01-02, build 71e0c880.</p>
<ul>
<li>
<p>Fix startup on Windows 8.</p>
</li>
<li>
<p>Fix field content appearing under editor buttons.</p>
</li>
<li>
<p>Better handle an error when recording.</p>
</li>
<li>
<p>Fix improper handling of collections with deck errors.</p>
</li>
<li>
<p>Fix duplicate deck names being created due to text encoding.</p>
</li>
<li>
<p>Fix gtk2 theme and fcitx module not being included.</p>
</li>
<li>
<p>Detect nouveau graphics drivers and automatically switch to software
rendering.</p>
</li>
</ul>
<h2 id="changes-in-217"><a class="header" href="#changes-in-217">Changes in 2.1.7</a></h2>
<p>Released 2018-12-17.</p>
<ul>
<li>
<p>Fix &quot;QPushButton has been deleted&quot; error messages after a problem
occurs changing note types.</p>
</li>
<li>
<p>Fix errors during &quot;Check Database&quot; that are just a byproduct of a
previous operation that failed.</p>
</li>
<li>
<p>Fix problems searching for some non-Latin text in decks/note type
names.</p>
</li>
<li>
<p>Ensure cgi and uuid modules are available to add-ons.</p>
</li>
<li>
<p>Improvements to the Windows installer.</p>
</li>
<li>
<p>Automatically restart mpv if it stops responding.</p>
</li>
<li>
<p>Donâ€™t convert non-Latin characters in add-on configuration to
difficult-to-read escape codes.</p>
</li>
<li>
<p>Add a bottom border to the menubar on Windows 10.</p>
</li>
</ul>
<h2 id="changes-in-216"><a class="header" href="#changes-in-216">Changes in 2.1.6</a></h2>
<p>Released 2018-12-10.</p>
<p>Downloads are now split into a standard and alternate version.</p>
<p><strong>The standard version</strong>:</p>
<ul>
<li>
<p>Is built with the latest toolkit, which fixes various issues.</p>
</li>
<li>
<p>Changes the undo shortcut back to Ctrl+Z or Command+Z like Anki 2.0.</p>
</li>
<li>
<p>Includes a separate anki-console.exe executable in the Windows build
that may be useful for add-on authors.</p>
</li>
<li>
<p>Includes support for the fcitx input method and a gtk2 theme in the
Linux build.</p>
</li>
</ul>
<p>You can switch between the standard and alternate 2.1.6 without
problems. If you move back to a previous Anki 2.1 release, your sync
login details and window positions will be lost, and will need to be set
again.</p>
<p><strong>The standard version has updated requirements</strong>:</p>
<ul>
<li>
<p>The Windows build only supports 64 bit Windows 7 or later, and will
not run on a 32 bit install.</p>
</li>
<li>
<p>The Mac build requires macOS 10.12 or later.</p>
</li>
<li>
<p>The Linux build requires a Linux distribution from approximately
2016 or later.</p>
</li>
</ul>
<p>The alternate version is similar to previous Anki 2.1 releases, and is
built with an older toolkit. It will run on some older systems that the
standard version will not, but as it is not as up to date, it may be
missing bugfixes and security improvements that the standard version
includes.</p>
<p><strong>The alternate version will run on</strong>:</p>
<ul>
<li>
<p>Windows 7 32 bit or 64 bit installs</p>
</li>
<li>
<p>Mac 10.10 or later.</p>
</li>
<li>
<p>A Linux distro from around 2014 or later.</p>
</li>
</ul>
<p><strong>In addition to the toolkit upgrade, there have been some changes in
Anki itself</strong>:</p>
<ul>
<li>
<p>Improvements to the Browse screen and flagging:</p>
<ul>
<li>
<p>Search text is normalized, which fixes problems searching for
unicode characters with multiple possible encodings.</p>
</li>
<li>
<p>The selection is now partially transparent, allowing you to see
the underyling colours of the rows.</p>
</li>
<li>
<p>The screen doesnâ€™t scroll when performing actions that donâ€™t
change the selection count.</p>
</li>
<li>
<p>Flags now toggle on and off, and the separate clear flag action
has been removed.</p>
</li>
<li>
<p>The second flag is now orange instead of purple.</p>
</li>
<li>
<p>Find&amp;replace now only shows fields relevant to the notes youâ€™ve
selected, and is case insensitive.</p>
</li>
<li>
<p>Fix card list not updating when editing HTML.</p>
</li>
</ul>
</li>
<li>
<p>Importing apkgs is now more verbose about how notes have been
handled.</p>
</li>
<li>
<p>Prevent errors caused by the user adding a field reference to itself
on a field.</p>
</li>
<li>
<p>Better handle issues with the deck list, such as decks that are
missing a parent deck.</p>
</li>
<li>
<p>Anki should now be able to function even if a system proxy is
configured for localhost connections.</p>
</li>
<li>
<p>Fix font size being copied when pasting between Anki fields with
bold text.</p>
</li>
<li>
<p>Pasting a link with shift held down now creates a clickable link.</p>
</li>
<li>
<p>Fixed an issue with the bulk remove tags option where tags with
similar names could be removed as well.</p>
</li>
<li>
<p>Fixed an error that occurred with very long filenames on Windows.</p>
</li>
<li>
<p>Fixed an issue running latex commands on some Linux installs.</p>
</li>
<li>
<p>The Browse screenâ€™s sidebar now defaults to on.</p>
</li>
<li>
<p>Fixed a race condition that could cause two copies of Anki to open.</p>
</li>
<li>
<p>When adding media to cards, Anki now will automatically rename the
filenames if theyâ€™re too long.</p>
</li>
<li>
<p>The experimental scheduler now regularly checks if new learning
cards have become due.</p>
</li>
<li>
<p>Handle invalid add-on config (thanks to Arthur).</p>
</li>
<li>
<p>Enforce template ordering when card templates are reordered after
card creation (thanks to Arthur).</p>
</li>
<li>
<p>Donâ€™t change deck when Esc pressed in deck chooser (thanks to
David).</p>
</li>
<li>
<p>Fix a problem on initial startup when English not the default
language.</p>
</li>
<li>
<p>Fix busy cursor showing in import results screen.</p>
</li>
<li>
<p>Fix content overlap when add-ons have added many editor buttons.</p>
</li>
<li>
<p>Donâ€™t change current note when reopening editor from review screen
(thanks to Arthur).</p>
</li>
<li>
<p>A fix for running on Python 3.7 (thanks to Alexey).</p>
</li>
<li>
<p>Restore the tooltip for the Fields and Cards buttons in editor.</p>
</li>
<li>
<p>A possible fix for 'database is locked' errors on Windows.</p>
</li>
</ul>
<h2 id="changes-in-215"><a class="header" href="#changes-in-215">Changes in 2.1.5</a></h2>
<p>Released 2018-10-01.</p>
<ul>
<li>
<p>Use selected answer button instead of default when enter/space
pressed.</p>
</li>
<li>
<p>Change undo shortcut in browse screen to avoid conflict with editing
functionality.</p>
</li>
<li>
<p>Ignore standard mpv config file location in favour of Anki data
folder.</p>
</li>
<li>
<p>Fix importing of .apkg files when interface in Dutch.</p>
</li>
<li>
<p>Fix translations not working on Linux after 'make install'.</p>
</li>
<li>
<p>Support newlines in type:cloze, and treat them as spaces.</p>
</li>
<li>
<p>Add browser.rowChanged hook for add-on authors.</p>
</li>
<li>
<p>Possible fix for some 'database is locked' errors.</p>
</li>
<li>
<p>Fix errors on startup when deck given an invalid name.</p>
</li>
<li>
<p>Fix sorting not working when field contains only a media reference.</p>
</li>
<li>
<p>Fix 'access denied' error not being caught properly.</p>
</li>
<li>
<p>Fix exporting of v2 colpkg when interface in non-English language.</p>
</li>
<li>
<p>Fix conditional replacement not ignoring HTML formatting.</p>
</li>
<li>
<p>Fix question fade time being forced when hardware acceleration on.</p>
</li>
<li>
<p>Add a small margin between buttons during review.</p>
</li>
<li>
<p>V2 scheduler now respects maximum interval even if it will lead to
all buttons giving the same interval.</p>
</li>
<li>
<p>Tweak margins in overview and answer button areas.</p>
</li>
<li>
<p>Ignore UI events that are received after collection has been closed.</p>
</li>
<li>
<p>Donâ€™t try to import .anki(2) files as text.</p>
</li>
<li>
<p>Added support for Lojban (thanks to giqtaqisi)</p>
</li>
</ul>
<h2 id="changes-in-214"><a class="header" href="#changes-in-214">Changes in 2.1.4</a></h2>
<p>Released 2018-09-05.</p>
<ul>
<li>
<p>Fix deck list getting stuck when creating filtered deck.</p>
</li>
<li>
<p>Prevent local cards being overwritten when accidentally downloading
empty AnkiWeb collection.</p>
</li>
<li>
<p>Favour mark/flag colour over suspended colour in browse screen.</p>
</li>
<li>
<p>Fix new day calculation in experimental scheduler.</p>
</li>
<li>
<p>Linux theme tweaks (thanks to Glutanimate).</p>
</li>
<li>
<p>Disable view page button for locally added add-ons (thanks to
upday7).</p>
</li>
</ul>
<h2 id="changes-in-213"><a class="header" href="#changes-in-213">Changes in 2.1.3</a></h2>
<p>Released 2018-08-30.</p>
<ul>
<li>
<p>Hardware acceleration can now be toggled in the preferences screen
on Windows/Linux.</p>
</li>
<li>
<p>Disable question fade-in during review when hardware acceleration is
off.</p>
</li>
<li>
<p>Fix some add-ons leaving a blank space in the main window when Anki
restarted.</p>
</li>
<li>
<p>Fix file associations on macOS.</p>
</li>
<li>
<p>Fix some unwanted text being included when pasting.</p>
</li>
<li>
<p>Fix shortcut keys like space from repeatedly triggering when held
down.</p>
</li>
</ul>
<h2 id="changes-in-212"><a class="header" href="#changes-in-212">Changes in 2.1.2</a></h2>
<p>Released 2018-08-20.</p>
<ul>
<li>
<p>Add missing .apkg and .colpkg file associations.</p>
</li>
<li>
<p>Improve handling of images inlined in fields.</p>
</li>
</ul>
<h2 id="changes-in-211"><a class="header" href="#changes-in-211">Changes in 2.1.1</a></h2>
<p>Released 2018-08-09.</p>
<ul>
<li>
<p>Fixed exporting of .apkg files with regular scheduler.</p>
</li>
<li>
<p>Work around Anki failing to start on some Windows machines.</p>
</li>
<li>
<p>Fix dialogs failing to show in tabs when using macOSâ€™s full screen
mode.</p>
</li>
<li>
<p>Extract embedded images when pasting HTML.</p>
</li>
<li>
<p>Fix images copied from Finder not pasting properly.</p>
</li>
<li>
<p>When the sort field is set to RTL, display in RTL order in the
browser.</p>
</li>
<li>
<p>Update toolkit version on Windows.</p>
</li>
</ul>
<h2 id="changes-in-210"><a class="header" href="#changes-in-210">Changes in 2.1.0</a></h2>
<p>Released 2018-08-06.</p>
<p>The first stable release of Anki 2.1.</p>
<p>Changes from the previous release candidate:</p>
<ul>
<li>
<p>Donâ€™t unmaximize when reshowing browse screen.</p>
</li>
<li>
<p>Add *.webm to attach media file selector.</p>
</li>
<li>
<p>Add shortcut key for MathJax mhchem support.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="changes-in-anki-21"><a class="header" href="#changes-in-anki-21">Changes in Anki 2.1</a></h1>
<ul>
<li><a href="changes/2.1.html#translations">Translations</a></li>
<li><a href="changes/2.1.html#at-a-glance">At a glance</a></li>
<li><a href="changes/2.1.html#add-ons">Add-ons</a></li>
<li><a href="changes/2.1.html#other-changes">Other changes</a></li>
<li><a href="changes/2.1.html#experimental-scheduler">Experimental scheduler</a></li>
</ul>
<h2 id="translations"><a class="header" href="#translations">Translations</a></h2>
<ul>
<li><a href="http://rs.luminousspice.com/changeinanki2/">æ—¥æœ¬èªž</a></li>
</ul>
<h2 id="at-a-glance"><a class="header" href="#at-a-glance">At a glance</a></h2>
<ul>
<li>
<p>Anki 2.1 uses the same scheduling, syncing and file format as Anki
2.0.x, so you can upgrade and downgrade at will.</p>
</li>
<li>
<p>Itâ€™s built with recent support libraries (Python 3.6, Qt 5.9/5.12),
bringing fixes for crashes, better handling of high resolution
displays, non-Latin text, and the latest web standards.</p>
</li>
<li>
<p>It requires a modern system - Windows 7+, OSX 10.10+, or a Linux
distro from around 2014+.</p>
</li>
<li>
<p>Add-ons will need to be updated to work with 2.1.</p>
</li>
</ul>
<h2 id="add-ons"><a class="header" href="#add-ons">Add-ons</a></h2>
<p>Add-ons need to be updated to work with Anki 2.1. <a href="https://ankiweb.net/shared/addons/2.1">Some
add-ons</a> have already been
updated; others have not been ported yet.</p>
<p>When you install 2.1, it will create a separate folder for add-ons, and
not import any existing ones you have installed.</p>
<p>If youâ€™re an add-on author, you can read more about the required changes
on <a href="https://apps.ankiweb.net/docs/addons.html">https://apps.ankiweb.net/docs/addons.html</a></p>
<h2 id="other-changes"><a class="header" href="#other-changes">Other changes</a></h2>
<p>Anki 2.1 brings numerous bugfixes, and some quality of life
improvements, such as:</p>
<ul>
<li>
<p>Built in MathJax support</p>
</li>
<li>
<p>A &quot;restore backup&quot; option in the profiles screen</p>
</li>
<li>
<p>SVG rendering support for LaTeX</p>
</li>
<li>
<p>Improved add-on configuration, management and updating</p>
</li>
<li>
<p>Night mode for reviewing</p>
</li>
<li>
<p>Improved pasting, with less unnecessary formatting included, and
better handling of media links. You can hold the shift key when
pasting to allow more formatting to be included.</p>
</li>
</ul>
<p>The Browse screen has been simplified:</p>
<ul>
<li>
<p>Various shortcuts that were previously in the sidebar are now
available via the Filter button. If you find yourself frequently
accessing certain items, you can save the search to have them appear
in the side bar.</p>
</li>
<li>
<p>The top bar with common shortcuts has been removed. You can access
all actions quickly by right clicking or ctrl+clicking in the card
list instead, and there is an add-on available for adding back the
top bar if you still prefer it.</p>
</li>
</ul>
<p>A full list of changes made during the alpha and beta period are
documented <a href="https://apps.ankiweb.net/docs/beta.html">here</a>.</p>
<h2 id="experimental-scheduler"><a class="header" href="#experimental-scheduler">Experimental scheduler</a></h2>
<p>Anki 2.1 contains an optional, <a href="https://anki.tenderapp.com/kb/anki-ecosystem/experiment-scheduling-changes-in-anki-21">experimental
scheduler</a>.
The experimental scheduler is not compatible with older Anki versions.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="known-issues"><a class="header" href="#known-issues">Known Issues</a></h1>
<p>Please see the notes for your platform on <a href="https://docs.ankiweb.net/platform/intro.html">https://docs.ankiweb.net/platform/intro.html</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
